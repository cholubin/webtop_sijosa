(function(){this.MooTools={version:"1.3",build:"a3eed692dd85050d80168ec2c708efe901bb7db3"};var a=this.typeOf=function(l){if(l==null)return"null";if(l.$family)return l.$family();if(l.nodeName){if(l.nodeType==1)return"element";if(l.nodeType==3)return/\S/.test(l.nodeValue)?"textnode":"whitespace"}else if(typeof l.length=="number"){if(l.callee)return"arguments";if("item"in l)return"collection"}return typeof l},c=this.instanceOf=function(l,q){if(l==null)return false;for(var r=l.$constructor||l.constructor;r;){if(r===
q)return true;r=r.parent}return l instanceof q},d=this.Function,e=true,g;for(g in{toString:1})e=null;if(e)e=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];d.prototype.overloadSetter=function(l){var q=this;return function(r,s){if(r==null)return this;if(l||typeof r!="string"){for(var x in r)q.call(this,x,r[x]);if(e)for(var t=e.length;t--;){x=e[t];r.hasOwnProperty(x)&&q.call(this,x,r[x])}}else q.call(this,r,s);return this}};d.prototype.overloadGetter=
function(l){var q=this;return function(r){var s,x;if(l||typeof r!="string")s=r;else if(arguments.length>1)s=arguments;if(s){x={};for(var t=0;t<s.length;t++)x[s[t]]=q.call(this,s[t])}else x=q.call(this,r);return x}};d.prototype.extend=function(l,q){this[l]=q}.overloadSetter();d.prototype.implement=function(l,q){this.prototype[l]=q}.overloadSetter();var h=Array.prototype.slice;d.from=function(l){return a(l)=="function"?l:function(){return l}};Array.from=function(l){if(l==null)return[];return b.isEnumerable(l)&&
typeof l!="string"?a(l)=="array"?l:h.call(l):[l]};Number.from=function(l){l=parseFloat(l);return isFinite(l)?l:null};String.from=function(l){return l+""};d.implement({hide:function(){this.$hidden=true;return this},protect:function(){this.$protected=true;return this}});var b=this.Type=function(l,q){if(l){var r=l.toLowerCase(),s=function(x){return a(x)==r};b["is"+l]=s;if(q!=null){q.prototype.$family=function(){return r}.hide();q.type=s}}if(q==null)return null;q.extend(this);q.$constructor=b;return q.prototype.$constructor=
q},f=Object.prototype.toString;b.isEnumerable=function(l){return l!=null&&typeof l.length=="number"&&f.call(l)!="[object Function]"};var j={},n=function(l){l=a(l.prototype);return j[l]||(j[l]=[])},o=function(l,q){if(q&&q.$hidden)return this;for(var r=n(this),s=0;s<r.length;s++){var x=r[s];a(x)=="type"?o.call(x,l,q):x.call(this,l,q)}r=this.prototype[l];if(r==null||!r.$protected)this.prototype[l]=q;this[l]==null&&a(q)=="function"&&p.call(this,l,function(t){return q.apply(t,h.call(arguments,1))});return this},
p=function(l,q){if(q&&q.$hidden)return this;var r=this[l];if(r==null||!r.$protected)this[l]=q;return this};b.implement({implement:o.overloadSetter(),extend:p.overloadSetter(),alias:function(l,q){o.call(this,l,this.prototype[q])}.overloadSetter(),mirror:function(l){n(this).push(l);return this}});new b("Type",b);var i=function(l,q,r){var s=q!=Object,x=q.prototype;if(s)q=new b(l,q);l=0;for(var t=r.length;l<t;l++){var w=r[l],D=q[w],B=x[w];D&&D.protect();if(s&&B){delete x[w];x[w]=B.protect()}}s&&q.implement(x);
return i};i("String",String,["charAt","charCodeAt","concat","indexOf","lastIndexOf","match","quote","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase"])("Array",Array,["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice","indexOf","lastIndexOf","filter","forEach","every","map","some","reduce","reduceRight"])("Number",Number,["toExponential","toFixed","toLocaleString","toPrecision"])("Function",d,["apply","call","bind"])("RegExp",RegExp,
["exec","test"])("Object",Object,["create","defineProperty","defineProperties","keys","getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","preventExtensions","isExtensible","seal","isSealed","freeze","isFrozen"])("Date",Date,["now"]);Object.extend=p.overloadSetter();Date.extend("now",function(){return+new Date});new b("Boolean",Boolean);Number.prototype.$family=function(){return isFinite(this)?"number":"null"}.hide();Number.extend("random",function(l,q){return Math.floor(Math.random()*
(q-l+1)+l)});Object.extend("forEach",function(l,q,r){for(var s in l)l.hasOwnProperty(s)&&q.call(r,l[s],s,l)});Object.each=Object.forEach;Array.implement({forEach:function(l,q){for(var r=0,s=this.length;r<s;r++)r in this&&l.call(q,this[r],r,this)},each:function(l,q){Array.forEach(this,l,q);return this}});var k=function(l){switch(a(l)){case "array":return l.clone();case "object":return Object.clone(l);default:return l}};Array.implement("clone",function(){for(var l=this.length,q=Array(l);l--;)q[l]=k(this[l]);
return q});var m=function(l,q,r){switch(a(r)){case "object":if(a(l[q])=="object")Object.merge(l[q],r);else l[q]=Object.clone(r);break;case "array":l[q]=r.clone();break;default:l[q]=r}return l};Object.extend({merge:function(l,q,r){if(a(q)=="string")return m(l,q,r);for(var s=1,x=arguments.length;s<x;s++){var t=arguments[s],w;for(w in t)m(l,w,t[w])}return l},clone:function(l){var q={},r;for(r in l)q[r]=k(l[r]);return q},append:function(l){for(var q=1,r=arguments.length;q<r;q++){var s=arguments[q]||{},
x;for(x in s)l[x]=s[x]}return l}});["Object","WhiteSpace","TextNode","Collection","Arguments"].each(function(l){new b(l)});var u=Date.now();String.extend("uniqueID",function(){return(u++).toString(36)});var v=this.Hash=new b("Hash",function(l){if(a(l)=="hash")l=Object.clone(l.getClean());for(var q in l)this[q]=l[q];return this});v.implement({forEach:function(l,q){Object.forEach(this,l,q)},getClean:function(){var l={},q;for(q in this)if(this.hasOwnProperty(q))l[q]=this[q];return l},getLength:function(){var l=
0,q;for(q in this)this.hasOwnProperty(q)&&l++;return l}});v.alias("each","forEach");Object.type=b.isObject;var y=this.Native=function(l){return new b(l.name,l.initialize)};y.type=b.type;y.implement=function(l,q){for(var r=0;r<l.length;r++)l[r].implement(q);return y};var z=Array.type;Array.type=function(l){return c(l,Array)||z(l)};this.$A=function(l){return Array.from(l).slice()};this.$arguments=function(l){return function(){return arguments[l]}};this.$chk=function(l){return!!(l||l===0)};this.$clear=
function(l){clearTimeout(l);clearInterval(l);return null};this.$defined=function(l){return l!=null};this.$each=function(l,q,r){var s=a(l);(s=="arguments"||s=="collection"||s=="array"||s=="elements"?Array:Object).each(l,q,r)};this.$empty=function(){};this.$extend=function(l,q){return Object.append(l,q)};this.$H=function(l){return new v(l)};this.$merge=function(){var l=Array.slice(arguments);l.unshift({});return Object.merge.apply(null,l)};this.$lambda=d.from;this.$mixin=Object.merge;this.$random=Number.random;
this.$splat=Array.from;this.$time=Date.now;this.$type=function(l){l=a(l);if(l=="elements")return"array";return l=="null"?false:l};this.$unlink=function(l){switch(a(l)){case "object":return Object.clone(l);case "array":return Array.clone(l);case "hash":return new v(l);default:return l}}})();
Array.implement({invoke:function(a){var c=Array.slice(arguments,1);return this.map(function(d){return d[a].apply(d,c)})},every:function(a,c){for(var d=0,e=this.length;d<e;d++)if(d in this&&!a.call(c,this[d],d,this))return false;return true},filter:function(a,c){for(var d=[],e=0,g=this.length;e<g;e++)e in this&&a.call(c,this[e],e,this)&&d.push(this[e]);return d},clean:function(){return this.filter(function(a){return a!=null})},indexOf:function(a,c){for(var d=this.length,e=c<0?Math.max(0,d+c):c||0;e<
d;e++)if(this[e]===a)return e;return-1},map:function(a,c){for(var d=[],e=0,g=this.length;e<g;e++)if(e in this)d[e]=a.call(c,this[e],e,this);return d},some:function(a,c){for(var d=0,e=this.length;d<e;d++)if(d in this&&a.call(c,this[d],d,this))return true;return false},associate:function(a){for(var c={},d=Math.min(this.length,a.length),e=0;e<d;e++)c[a[e]]=this[e];return c},link:function(a){for(var c={},d=0,e=this.length;d<e;d++)for(var g in a)if(a[g](this[d])){c[g]=this[d];delete a[g];break}return c},
contains:function(a,c){return this.indexOf(a,c)!=-1},append:function(a){this.push.apply(this,a);return this},getLast:function(){return this.length?this[this.length-1]:null},getRandom:function(){return this.length?this[Number.random(0,this.length-1)]:null},include:function(a){this.contains(a)||this.push(a);return this},combine:function(a){for(var c=0,d=a.length;c<d;c++)this.include(a[c]);return this},erase:function(a){for(var c=this.length;c--;)this[c]===a&&this.splice(c,1);return this},empty:function(){this.length=
0;return this},flatten:function(){for(var a=[],c=0,d=this.length;c<d;c++){var e=typeOf(this[c]);if(e!="null")a=a.concat(e=="array"||e=="collection"||e=="arguments"||instanceOf(this[c],Array)?Array.flatten(this[c]):this[c])}return a},pick:function(){for(var a=0,c=this.length;a<c;a++)if(this[a]!=null)return this[a];return null},hexToRgb:function(a){if(this.length!=3)return null;var c=this.map(function(d){if(d.length==1)d+=d;return d.toInt(16)});return a?c:"rgb("+c+")"},rgbToHex:function(a){if(this.length<
3)return null;if(this.length==4&&this[3]==0&&!a)return"transparent";for(var c=[],d=0;d<3;d++){var e=(this[d]-0).toString(16);c.push(e.length==1?"0"+e:e)}return a?c:"#"+c.join("")}});Array.alias("extend","append");var $pick=function(){return Array.from(arguments).pick()};
String.implement({test:function(a,c){return(typeOf(a)=="regexp"?a:RegExp(""+a,c)).test(this)},contains:function(a,c){return c?(c+this+c).indexOf(c+a+c)>-1:this.indexOf(a)>-1},trim:function(){return this.replace(/^\s+|\s+$/g,"")},clean:function(){return this.replace(/\s+/g," ").trim()},camelCase:function(){return this.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()})},hyphenate:function(){return this.replace(/[A-Z]/g,function(a){return"-"+a.charAt(0).toLowerCase()})},capitalize:function(){return this.replace(/\b[a-z]/g,
function(a){return a.toUpperCase()})},escapeRegExp:function(){return this.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},toInt:function(a){return parseInt(this,a||10)},toFloat:function(){return parseFloat(this)},hexToRgb:function(a){var c=this.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return c?c.slice(1).hexToRgb(a):null},rgbToHex:function(a){var c=this.match(/\d{1,3}/g);return c?c.rgbToHex(a):null},substitute:function(a,c){return this.replace(c||/\\?\{([^{}]+)\}/g,function(d,e){if(d.charAt(0)=="\\")return d.slice(1);
return a[e]!=null?a[e]:""})}});Number.implement({limit:function(a,c){return Math.min(c,Math.max(a,this))},round:function(a){a=Math.pow(10,a||0).toFixed(a<0?-a:0);return Math.round(this*a)/a},times:function(a,c){for(var d=0;d<this;d++)a.call(c,d,this)},toFloat:function(){return parseFloat(this)},toInt:function(a){return parseInt(this,a||10)}});Number.alias("each","times");
(function(a){var c={};a.each(function(d){Number[d]||(c[d]=function(){return Math[d].apply(null,[this].concat(Array.from(arguments)))})});Number.implement(c)})(["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","sin","sqrt","tan"]);
Object.extend({subset:function(a,c){for(var d={},e=0,g=c.length;e<g;e++){var h=c[e];d[h]=a[h]}return d},map:function(a,c,d){var e={},g;for(g in a)if(a.hasOwnProperty(g))e[g]=c.call(d,a[g],g,a);return e},filter:function(a,c,d){var e={};Object.each(a,function(g,h){if(c.call(d,g,h,a))e[h]=g});return e},every:function(a,c,d){for(var e in a)if(a.hasOwnProperty(e)&&!c.call(d,a[e],e))return false;return true},some:function(a,c,d){for(var e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e))return true;return false},
keys:function(a){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d);return c},values:function(a){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(a[d]);return c},getLength:function(a){return Object.keys(a).length},keyOf:function(a,c){for(var d in a)if(a.hasOwnProperty(d)&&a[d]===c)return d;return null},contains:function(a,c){return Object.keyOf(a,c)!=null},toQueryString:function(a,c){var d=[];Object.each(a,function(e,g){if(c)g=c+"["+g+"]";var h;switch(typeOf(e)){case "object":h=Object.toQueryString(e,
g);break;case "array":var b={};e.each(function(f,j){b[j]=f});h=Object.toQueryString(b,g);break;default:h=g+"="+encodeURIComponent(e)}e!=null&&d.push(h)});return d.join("&")}});
Hash.implement({has:Object.prototype.hasOwnProperty,keyOf:function(a){return Object.keyOf(this,a)},hasValue:function(a){return Object.contains(this,a)},extend:function(a){Hash.each(a||{},function(c,d){Hash.set(this,d,c)},this);return this},combine:function(a){Hash.each(a||{},function(c,d){Hash.include(this,d,c)},this);return this},erase:function(a){this.hasOwnProperty(a)&&delete this[a];return this},get:function(a){return this.hasOwnProperty(a)?this[a]:null},set:function(a,c){if(!this[a]||this.hasOwnProperty(a))this[a]=
c;return this},empty:function(){Hash.each(this,function(a,c){delete this[c]},this);return this},include:function(a,c){if(this[a]==null)this[a]=c;return this},map:function(a,c){return new Hash(Object.map(this,a,c))},filter:function(a,c){return new Hash(Object.filter(this,a,c))},every:function(a,c){return Object.every(this,a,c)},some:function(a,c){return Object.some(this,a,c)},getKeys:function(){return Object.keys(this)},getValues:function(){return Object.values(this)},toQueryString:function(a){return Object.toQueryString(this,
a)}});Hash.extend=Object.append;Hash.alias({indexOf:"keyOf",contains:"hasValue"});Function.extend({attempt:function(){for(var a=0,c=arguments.length;a<c;a++)try{return arguments[a]()}catch(d){}return null}});
Function.implement({attempt:function(a,c){try{return this.apply(c,Array.from(a))}catch(d){}return null},bind:function(a){var c=this,d=arguments.length>1?Array.slice(arguments,1):null;return function(){if(!d&&!arguments.length)return c.call(a);if(d&&arguments.length)return c.apply(a,d.concat(Array.from(arguments)));return c.apply(a,d||arguments)}},pass:function(a,c){var d=this;if(a!=null)a=Array.from(a);return function(){return d.apply(c,a||arguments)}},delay:function(a,c,d){return setTimeout(this.pass(d,
c),a)},periodical:function(a,c,d){return setInterval(this.pass(d,c),a)}});delete Function.prototype.bind;
Function.implement({create:function(a){var c=this;a=a||{};return function(d){var e=a.arguments;e=e!=null?Array.from(e):Array.slice(arguments,a.event?1:0);if(a.event)e=[d||window.event].extend(e);var g=function(){return c.apply(a.bind||null,e)};if(a.delay)return setTimeout(g,a.delay);if(a.periodical)return setInterval(g,a.periodical);if(a.attempt)return Function.attempt(g);return g()}},bind:function(a,c){var d=this;if(c!=null)c=Array.from(c);return function(){return d.apply(a,c||arguments)}},bindWithEvent:function(a,
c){var d=this;if(c!=null)c=Array.from(c);return function(e){return d.apply(a,c==null?arguments:[e].concat(c))}},run:function(a,c){return this.apply(c,Array.from(a))}});var $try=Function.attempt;
(function(){var a=this.document,c=a.window=this,d=1;this.$uid=c.ActiveXObject?function(k){return(k.uid||(k.uid=[d++]))[0]}:function(k){return k.uid||(k.uid=d++)};$uid(c);$uid(a);var e=navigator.userAgent.toLowerCase(),g=navigator.platform.toLowerCase(),h=e.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],b=this.Browser={extend:Function.prototype.extend,name:h[1]=="version"?h[3]:h[1],version:h[1]=="ie"&&a.documentMode||parseFloat(h[1]==
"opera"&&h[4]?h[4]:h[2]),Platform:{name:e.match(/ip(?:ad|od|hone)/)?"ios":(e.match(/(?:webos|android)/)||g.match(/mac|win|linux/)||["other"])[0]},Features:{xpath:!!a.evaluate,air:!!c.runtime,query:!!a.querySelector,json:!!c.JSON},Plugins:{}};b[b.name]=true;b[b.name+parseInt(b.version,10)]=true;b.Platform[b.Platform.name]=true;b.Request=function(){var k=function(){return new XMLHttpRequest},m=function(){return new ActiveXObject("MSXML2.XMLHTTP")},u=function(){return new ActiveXObject("Microsoft.XMLHTTP")};
return Function.attempt(function(){k();return k},function(){m();return m},function(){u();return u})}();b.Features.xhr=!!b.Request;g=(Function.attempt(function(){return navigator.plugins["Shockwave Flash"].description},function(){return(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")})||"0 r0").match(/\d+/g);b.Plugins.Flash={version:Number(g[0]||"0."+g[1])||0,build:Number(g[2])||0};b.exec=function(k){if(!k)return k;if(c.execScript)c.execScript(k);else{var m=a.createElement("script");
m.setAttribute("type","text/javascript");m.text=k;a.head.appendChild(m);a.head.removeChild(m)}return k};String.implement("stripScripts",function(k){var m="",u=this.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(v,y){m+=y+"\n";return""});if(k===true)b.exec(m);else typeOf(k)=="function"&&k(m,u);return u});b.extend({Document:this.Document,Window:this.Window,Element:this.Element,Event:this.Event});this.Window=this.$constructor=new Type("Window",function(){});this.$family=Function.from("window").hide();
Window.mirror(function(k,m){c[k]=m});this.Document=a.$constructor=new Type("Document",function(){});a.$family=Function.from("document").hide();Document.mirror(function(k,m){a[k]=m});a.html=a.documentElement;a.head=a.getElementsByTagName("head")[0];if(a.execCommand)try{a.execCommand("BackgroundImageCache",false,true)}catch(f){}if(this.attachEvent&&!this.addEventListener){var j=function(){this.detachEvent("onunload",j);a.head=a.html=a.window=null};this.attachEvent("onunload",j)}var n=Array.from;try{n(a.html.childNodes)}catch(o){Array.from=
function(k){if(typeof k!="string"&&Type.isEnumerable(k)&&typeOf(k)!="array"){for(var m=k.length,u=Array(m);m--;)u[m]=k[m];return u}return n(k)};var p=Array.prototype,i=p.slice;["pop","push","reverse","shift","sort","splice","unshift","concat","join","slice"].each(function(k){var m=p[k];Array[k]=function(u){return m.apply(Array.from(u),i.call(arguments,1))}})}if(b.Platform.ios)b.Platform.ipod=true;b.Engine={};g=function(k,m){b.Engine.name=k;b.Engine[k+m]=true;b.Engine.version=m};if(b.ie){b.Engine.trident=
true;switch(b.version){case 6:g("trident",4);break;case 7:g("trident",5);break;case 8:g("trident",6)}}if(b.firefox){b.Engine.gecko=true;b.version>=3?g("gecko",19):g("gecko",18)}if(b.safari||b.chrome){b.Engine.webkit=true;switch(b.version){case 2:g("webkit",419);break;case 3:g("webkit",420);break;case 4:g("webkit",525)}}if(b.opera){b.Engine.presto=true;if(b.version>=9.6)g("presto",960);else b.version>=9.5?g("presto",950):g("presto",925)}if(b.name=="unknown")switch((e.match(/(?:webkit|khtml|gecko)/)||
[])[0]){case "webkit":case "khtml":b.Engine.webkit=true;break;case "gecko":b.Engine.gecko=true}this.$exec=b.exec})();
var Event=new Type("Event",function(a,c){c||(c=window);var d=c.document;a=a||c.event;if(a.$extended)return a;this.$extended=true;for(var e=a.type,g=a.target||a.srcElement,h={},b={};g&&g.nodeType==3;)g=g.parentNode;if(e.indexOf("key")!=-1){var f=a.which||a.keyCode,j=Object.keyOf(Event.Keys,f);if(e=="keydown"){d=f-111;if(d>0&&d<13)j="f"+d}j||(j=String.fromCharCode(f).toLowerCase())}else if(e.test(/click|mouse|menu/i)){d=!d.compatMode||d.compatMode=="CSS1Compat"?d.html:d.body;h={x:a.pageX!=null?a.pageX:
a.clientX+d.scrollLeft,y:a.pageY!=null?a.pageY:a.clientY+d.scrollTop};b={x:a.pageX!=null?a.pageX-c.pageXOffset:a.clientX,y:a.pageY!=null?a.pageY-c.pageYOffset:a.clientY};if(e.test(/DOMMouseScroll|mousewheel/))var n=a.wheelDelta?a.wheelDelta/120:-(a.detail||0)/3;var o=a.which==3||a.button==2,p=null;if(e.test(/over|out/)){p=a.relatedTarget||a[(e=="mouseover"?"from":"to")+"Element"];d=function(){for(;p&&p.nodeType==3;)p=p.parentNode;return true};p=(Browser.firefox2?d.attempt():d())?p:null}}else if(e.test(/gesture|touch/i)){this.rotation=
a.rotation;this.scale=a.scale;this.targetTouches=a.targetTouches;this.changedTouches=a.changedTouches;if((d=this.touches=a.touches)&&d[0]){b=d[0];h={x:b.pageX,y:b.pageY};b={x:b.clientX,y:b.clientY}}}return Object.append(this,{event:a,type:e,page:h,client:b,rightClick:o,wheel:n,relatedTarget:document.id(p),target:document.id(g),code:f,key:j,shift:a.shiftKey,control:a.ctrlKey,alt:a.altKey,meta:a.metaKey})});Event.Keys={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,"delete":46};
Event.Keys=new Hash(Event.Keys);Event.implement({stop:function(){return this.stopPropagation().preventDefault()},stopPropagation:function(){if(this.event.stopPropagation)this.event.stopPropagation();else this.event.cancelBubble=true;return this},preventDefault:function(){if(this.event.preventDefault)this.event.preventDefault();else this.event.returnValue=false;return this}});
(function(){function a(m,u,v,y,z,l,q,r,s,x,t,w,D,B,E){if(u||d===-1){c.expressions[++d]=[];e=-1;if(u)return""}if(v||y||e===-1){v=v||" ";m=c.expressions[d];if(g&&m[e])m[e].reverseCombinator=n(v);m[++e]={combinator:v,tag:"*"}}v=c.expressions[d][e];if(z)v.tag=z.replace(f,"");else if(l)v.id=l.replace(f,"");else if(q){q=q.replace(f,"");if(!v.classList)v.classList=[];if(!v.classes)v.classes=[];v.classList.push(q);v.classes.push({value:q,regexp:RegExp("(^|\\s)"+p(q)+"(\\s|$)")})}else if(w){E=(E=E||B)?E.replace(f,
""):null;if(!v.pseudos)v.pseudos=[];v.pseudos.push({key:w.replace(f,""),value:E})}else if(r){r=r.replace(f,"");t=(t||"").replace(f,"");var C,F;switch(s){case "^=":F=RegExp("^"+p(t));break;case "$=":F=RegExp(p(t)+"$");break;case "~=":F=RegExp("(^|\\s)"+p(t)+"(\\s|$)");break;case "|=":F=RegExp("^"+p(t)+"(-|$)");break;case "=":C=function(A){return t==A};break;case "*=":C=function(A){return A&&A.indexOf(t)>-1};break;case "!=":C=function(A){return t!=A};break;default:C=function(A){return!!A}}if(t==""&&
/^[*$^]=$/.test(s))C=function(){return false};C||(C=function(A){return A&&F.test(A)});if(!v.attributes)v.attributes=[];v.attributes.push({key:r,operator:s,value:t,test:C})}return""}var c,d,e,g,h={},b={},f=/\\/g,j=function(m,u){if(m==null)return null;if(m.Slick===true)return m;m=(""+m).replace(/^\s+|\s+$/g,"");var v=(g=!!u)?b:h;if(v[m])return v[m];c={Slick:true,expressions:[],raw:m,reverse:function(){return j(this.raw,true)}};for(d=-1;m!=(m=m.replace(i,a)););c.length=c.expressions.length;return v[m]=
g?o(c):c},n=function(m){return m==="!"?" ":m===" "?"!":/^!/.test(m)?m.replace(/^!/,""):"!"+m},o=function(m){for(var u=m.expressions,v=0;v<u.length;v++){for(var y=u[v],z={parts:[],tag:"*",combinator:n(y[0].combinator)},l=0;l<y.length;l++){var q=y[l];if(!q.reverseCombinator)q.reverseCombinator=" ";q.combinator=q.reverseCombinator;delete q.reverseCombinator}y.reverse().push(z)}return m},p=function(m){return m.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,"\\$&")},i=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|:+(<unicode>+)(?:\\((?:(?:([\"'])([^\\12]*)\\12)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,
"["+p(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),k=this.Slick||{};k.parse=function(m){return j(m)};k.escapeRegExp=p;if(!this.Slick)this.Slick=k}).apply(typeof exports!="undefined"?exports:this);
(function(){var a={};a.isNativeCode=function(b){return/\{\s*\[native code\]\s*\}/.test(""+b)};a.isXML=function(b){return!!b.xmlVersion||!!b.xml||Object.prototype.toString.call(b)==="[object XMLDocument]"||b.nodeType===9&&b.documentElement.nodeName!=="HTML"};a.setDocument=function(b){if(b.nodeType!==9)if(b.ownerDocument)b=b.ownerDocument;else if(b.navigator)b=b.document;else return;if(this.document!==b){this.document=b;var f=this.root=b.documentElement;this.isXMLDocument=this.isXML(b);this.brokenStarGEBTN=
this.starSelectsClosedQSA=this.idGetsName=this.brokenMixedCaseQSA=this.brokenGEBCN=this.brokenCheckedQSA=this.brokenEmptyAttributeQSA=this.isHTMLDocument=false;var j,n,o,p,i,k,m=b.createElement("div");f.appendChild(m);try{k="slick_getbyid_test";m.innerHTML='<a id="'+k+'"></a>';this.isHTMLDocument=!!b.getElementById(k)}catch(u){}if(this.isHTMLDocument){m.style.display="none";m.appendChild(b.createComment(""));n=m.getElementsByTagName("*").length>0;try{m.innerHTML="foo</foo>";j=(i=m.getElementsByTagName("*"))&&
i.length&&i[0].nodeName.charAt(0)=="/"}catch(v){}this.brokenStarGEBTN=n||j;if(m.querySelectorAll)try{m.innerHTML="foo</foo>";this.starSelectsClosedQSA=(i=m.querySelectorAll("*"))&&i.length&&i[0].nodeName.charAt(0)=="/"}catch(y){}try{k="slick_id_gets_name";m.innerHTML='<a name="'+k+'"></a><b id="'+k+'"></b>';this.idGetsName=b.getElementById(k)===m.firstChild}catch(z){}try{m.innerHTML='<a class="MiXedCaSe"></a>';this.brokenMixedCaseQSA=!m.querySelectorAll(".MiXedCaSe").length}catch(l){}try{m.innerHTML=
'<a class="f"></a><a class="b"></a>';m.getElementsByClassName("b");m.firstChild.className="b";p=m.getElementsByClassName("b").length!=2}catch(q){}try{m.innerHTML='<a class="a"></a><a class="f b a"></a>';o=m.getElementsByClassName("a").length!=2}catch(r){}this.brokenGEBCN=p||o;try{m.innerHTML='<select><option selected="selected">a</option></select>';this.brokenCheckedQSA=m.querySelectorAll(":checked").length==0}catch(s){}try{m.innerHTML='<a class=""></a>';this.brokenEmptyAttributeQSA=m.querySelectorAll('[class*=""]').length!=
0}catch(x){}}f.removeChild(m);m=null;this.hasAttribute=f&&this.isNativeCode(f.hasAttribute)?function(t,w){return t.hasAttribute(w)}:function(t,w){t=t.getAttributeNode(w);return!!(t&&(t.specified||t.nodeValue))};this.contains=f&&this.isNativeCode(f.contains)?function(t,w){return t.contains(w)}:f&&f.compareDocumentPosition?function(t,w){return t===w||!!(t.compareDocumentPosition(w)&16)}:function(t,w){if(w){do if(w===t)return true;while(w=w.parentNode)}return false};this.documentSorter=f.compareDocumentPosition?
function(t,w){if(!t.compareDocumentPosition||!w.compareDocumentPosition)return 0;return t.compareDocumentPosition(w)&4?-1:t===w?0:1}:"sourceIndex"in f?function(t,w){if(!t.sourceIndex||!w.sourceIndex)return 0;return t.sourceIndex-w.sourceIndex}:b.createRange?function(t,w){if(!t.ownerDocument||!w.ownerDocument)return 0;var D=t.ownerDocument.createRange(),B=w.ownerDocument.createRange();D.setStart(t,0);D.setEnd(t,0);B.setStart(w,0);B.setEnd(w,0);return D.compareBoundaryPoints(Range.START_TO_END,B)}:
null;this.getUID=this.isHTMLDocument?this.getUIDHTML:this.getUIDXML}};a.search=function(b,f,j,n){var o=this.found=n?null:j||[];if(!b)return o;if(b.navigator)b=b.document;else if(!b.nodeType)return o;var p=this.uniques={};if(this.document!==(b.ownerDocument||b))this.setDocument(b);var i=!!(j&&j.length);if(i)for(j=o.length;j--;)this.uniques[this.getUID(o[j])]=true;if(typeof f=="string"){for(j=this.overrides.length;j--;){var k=this.overrides[j];if(k.regexp.test(f)){k=k.method.call(b,f,o,n);if(k!==false){if(k===
true)return o;return k}}}f=this.Slick.parse(f);if(!f.length)return o}else if(f==null)return o;else if(!f.Slick){if(this.contains(b.documentElement||b,f))o?o.push(f):o=f;return o}this.posNTH={};this.posNTHLast={};this.posNTHType={};this.posNTHTypeLast={};this.push=!i&&(n||f.length==1&&f.expressions[0].length==1)?this.pushArray:this.pushUID;if(o==null)o=[];var m,u,v,y,z,l,q,r,s,x,t,w=f.expressions;j=0;a:for(;t=w[j];j++)for(k=0;s=t[k];k++){v="combinator:"+s.combinator;if(!this[v])continue a;y=this.isXMLDocument?
s.tag:s.tag.toUpperCase();z=s.id;l=s.classList;q=s.classes;r=s.attributes;s=s.pseudos;m=k===t.length-1;this.bitUniques={};if(m){this.uniques=p;this.found=o}else{this.uniques={};this.found=[]}if(k===0){this[v](b,y,z,q,r,s,l);if(n&&m&&o.length)break a}else if(n&&m){m=0;for(u=x.length;m<u;m++){this[v](x[m],y,z,q,r,s,l);if(o.length)break a}}else{m=0;for(u=x.length;m<u;m++)this[v](x[m],y,z,q,r,s,l)}x=this.found}if(i||f.expressions.length>1)this.sort(o);return n?o[0]||null:o};a.uidx=1;a.uidk="slick:uniqueid";
a.getUIDXML=function(b){var f=b.getAttribute(this.uidk);if(!f){f=this.uidx++;b.setAttribute(this.uidk,f)}return f};a.getUIDHTML=function(b){return b.uniqueNumber||(b.uniqueNumber=this.uidx++)};a.sort=function(b){if(!this.documentSorter)return b;b.sort(this.documentSorter);return b};a.cacheNTH={};a.matchNTH=/^([+-]?\d*)?([a-z]+)?([+-]\d+)?$/;a.parseNTHArgument=function(b){var f=b.match(this.matchNTH);if(!f)return false;var j=f[2]||false,n=f[1]||1;if(n=="-")n=-1;f=+f[3]||0;f=j=="n"?{a:n,b:f}:j=="odd"?
{a:2,b:1}:j=="even"?{a:2,b:0}:{a:0,b:n};return this.cacheNTH[b]=f};a.createNTHPseudo=function(b,f,j,n){return function(o,p){var i=this.getUID(o);if(!this[j][i]){var k=o.parentNode;if(!k)return false;k=k[b];var m=1;if(n){var u=o.nodeName;do if(k.nodeName===u)this[j][this.getUID(k)]=m++;while(k=k[f])}else{do if(k.nodeType===1)this[j][this.getUID(k)]=m++;while(k=k[f])}}p=p||"n";m=this.cacheNTH[p]||this.parseNTHArgument(p);if(!m)return false;k=m.a;m=m.b;i=this[j][i];if(k==0)return m==i;if(k>0){if(i<m)return false}else if(m<
i)return false;return(i-m)%k==0}};a.pushArray=function(b,f,j,n,o,p){this.matchSelector(b,f,j,n,o,p)&&this.found.push(b)};a.pushUID=function(b,f,j,n,o,p){var i=this.getUID(b);if(!this.uniques[i]&&this.matchSelector(b,f,j,n,o,p)){this.uniques[i]=true;this.found.push(b)}};a.matchNode=function(b,f){var j=this.Slick.parse(f);if(!j)return true;if(j.length==1&&j.expressions[0].length==1){j=j.expressions[0][0];return this.matchSelector(b,this.isXMLDocument?j.tag:j.tag.toUpperCase(),j.id,j.classes,j.attributes,
j.pseudos)}j=this.search(this.document,j);for(var n=0,o;o=j[n++];)if(o===b)return true;return false};a.matchPseudo=function(b,f,j){var n="pseudo:"+f;if(this[n])return this[n](b,j);b=this.getAttribute(b,f);return j?j==b:!!b};a.matchSelector=function(b,f,j,n,o,p){if(f)if(f=="*"){if(b.nodeName<"@")return false}else if(b.nodeName!=f)return false;if(j&&b.getAttribute("id")!=j)return false;if(n)for(f=n.length;f--;){j="className"in b?b.className:b.getAttribute("class");if(!(j&&n[f].regexp.test(j)))return false}if(o)for(f=
o.length;f--;){n=o[f];if(n.operator?!n.test(this.getAttribute(b,n.key)):!this.hasAttribute(b,n.key))return false}if(p)for(f=p.length;f--;){n=p[f];if(!this.matchPseudo(b,n.key,n.value))return false}return true};var c={" ":function(b,f,j,n,o,p,i){var k;if(this.isHTMLDocument){a:if(j){k=this.document.getElementById(j);if(!k&&b.all||this.idGetsName&&k&&k.getAttributeNode("id").nodeValue!=j){i=b.all[j];if(!i)return;i[0]||(i=[i]);for(b=0;k=i[b++];)if(k.getAttributeNode("id").nodeValue==j){this.push(k,f,
null,n,o,p);break}return}if(k){if(this.document!==b&&!this.contains(b,k))return}else if(this.contains(this.document.documentElement,b))return;else break a;this.push(k,f,null,n,o,p);return}if(n&&b.getElementsByClassName&&!this.brokenGEBCN)if((i=b.getElementsByClassName(i.join(" ")))&&i.length){for(b=0;k=i[b++];)this.push(k,f,j,null,o,p);return}}if((i=b.getElementsByTagName(f))&&i.length){this.brokenStarGEBTN||(f=null);for(b=0;k=i[b++];)this.push(k,f,j,n,o,p)}},">":function(b,f,j,n,o,p){if(b=b.firstChild){do b.nodeType===
1&&this.push(b,f,j,n,o,p);while(b=b.nextSibling)}},"+":function(b,f,j,n,o,p){for(;b=b.nextSibling;)if(b.nodeType===1){this.push(b,f,j,n,o,p);break}},"^":function(b,f,j,n,o,p){if(b=b.firstChild)if(b.nodeType===1)this.push(b,f,j,n,o,p);else this["combinator:+"](b,f,j,n,o,p)},"~":function(b,f,j,n,o,p){for(;b=b.nextSibling;)if(b.nodeType===1){var i=this.getUID(b);if(this.bitUniques[i])break;this.bitUniques[i]=true;this.push(b,f,j,n,o,p)}},"++":function(b,f,j,n,o,p){this["combinator:+"](b,f,j,n,o,p);this["combinator:!+"](b,
f,j,n,o,p)},"~~":function(b,f,j,n,o,p){this["combinator:~"](b,f,j,n,o,p);this["combinator:!~"](b,f,j,n,o,p)},"!":function(b,f,j,n,o,p){for(;b=b.parentNode;)b!==this.document&&this.push(b,f,j,n,o,p)},"!>":function(b,f,j,n,o,p){b=b.parentNode;b!==this.document&&this.push(b,f,j,n,o,p)},"!+":function(b,f,j,n,o,p){for(;b=b.previousSibling;)if(b.nodeType===1){this.push(b,f,j,n,o,p);break}},"!^":function(b,f,j,n,o,p){if(b=b.lastChild)if(b.nodeType===1)this.push(b,f,j,n,o,p);else this["combinator:!+"](b,
f,j,n,o,p)},"!~":function(b,f,j,n,o,p){for(;b=b.previousSibling;)if(b.nodeType===1){var i=this.getUID(b);if(this.bitUniques[i])break;this.bitUniques[i]=true;this.push(b,f,j,n,o,p)}}},d;for(d in c)a["combinator:"+d]=c[d];c={empty:function(b){var f=b.firstChild;return!(f&&f.nodeType==1)&&!(b.innerText||b.textContent||"").length},not:function(b,f){return!this.matchNode(b,f)},contains:function(b,f){return(b.innerText||b.textContent||"").indexOf(f)>-1},"first-child":function(b){for(;b=b.previousSibling;)if(b.nodeType===
1)return false;return true},"last-child":function(b){for(;b=b.nextSibling;)if(b.nodeType===1)return false;return true},"only-child":function(b){for(var f=b;f=f.previousSibling;)if(f.nodeType===1)return false;for(;b=b.nextSibling;)if(b.nodeType===1)return false;return true},"nth-child":a.createNTHPseudo("firstChild","nextSibling","posNTH"),"nth-last-child":a.createNTHPseudo("lastChild","previousSibling","posNTHLast"),"nth-of-type":a.createNTHPseudo("firstChild","nextSibling","posNTHType",true),"nth-last-of-type":a.createNTHPseudo("lastChild",
"previousSibling","posNTHTypeLast",true),index:function(b,f){return this["pseudo:nth-child"](b,""+f+1)},even:function(b){return this["pseudo:nth-child"](b,"2n")},odd:function(b){return this["pseudo:nth-child"](b,"2n+1")},"first-of-type":function(b){for(var f=b.nodeName;b=b.previousSibling;)if(b.nodeName===f)return false;return true},"last-of-type":function(b){for(var f=b.nodeName;b=b.nextSibling;)if(b.nodeName===f)return false;return true},"only-of-type":function(b){for(var f=b,j=b.nodeName;f=f.previousSibling;)if(f.nodeName===
j)return false;for(;b=b.nextSibling;)if(b.nodeName===j)return false;return true},enabled:function(b){return b.disabled===false},disabled:function(b){return b.disabled===true},checked:function(b){return b.checked||b.selected},focus:function(b){return this.isHTMLDocument&&this.document.activeElement===b&&(b.href||b.type||this.hasAttribute(b,"tabindex"))},root:function(b){return b===this.root},selected:function(b){return b.selected}};for(var e in c)a["pseudo:"+e]=c[e];a.attributeGetters={"class":function(){return"className"in
this?this.className:this.getAttribute("class")},"for":function(){return"htmlFor"in this?this.htmlFor:this.getAttribute("for")},href:function(){return"href"in this?this.getAttribute("href",2):this.getAttribute("href")},style:function(){return this.style?this.style.cssText:this.getAttribute("style")}};a.getAttribute=function(b,f){var j=this.attributeGetters[f];if(j)return j.call(b);return(j=b.getAttributeNode(f))?j.nodeValue:null};a.overrides=[];a.override=function(b,f){this.overrides.push({regexp:b,
method:f})};var g=/\[.*[*$^]=(?:["']{2})?\]/;a.override(/./,function(b,f,j){if(!this.querySelectorAll||this.nodeType!=9||!a.isHTMLDocument||a.brokenMixedCaseQSA||a.brokenCheckedQSA&&b.indexOf(":checked")>-1||a.brokenEmptyAttributeQSA&&g.test(b)||h.disableQSA)return false;var n;try{if(j)return this.querySelector(b)||null;else n=this.querySelectorAll(b)}catch(o){return false}var p=!!f.length;if(a.starSelectsClosedQSA)for(j=0;b=n[j++];){if(b.nodeName>"@"&&(!p||!a.uniques[a.getUIDHTML(b)]))f.push(b)}else for(j=
0;b=n[j++];)if(!p||!a.uniques[a.getUIDHTML(b)])f.push(b);p&&a.sort(f);return true});a.override(/^[\w-]+$|^\*$/,function(b,f,j){if(b=="*"&&a.brokenStarGEBTN)return false;b=this.getElementsByTagName(b);if(j)return b[0]||null;var n,o=!!f.length;for(j=0;n=b[j++];)if(!o||!a.uniques[a.getUID(n)])f.push(n);o&&a.sort(f);return true});a.override(/^\.[\w-]+$/,function(b,f,j){if(!a.isHTMLDocument||!this.getElementsByClassName&&this.querySelectorAll)return false;var n,o,p=!!(f&&f.length),i=b.substring(1);if(this.getElementsByClassName&&
!a.brokenGEBCN){b=this.getElementsByClassName(i);if(j)return b[0]||null;for(o=0;n=b[o++];)if(!p||!a.uniques[a.getUIDHTML(n)])f.push(n)}else{var k=RegExp("(^|\\s)"+h.escapeRegExp(i)+"(\\s|$)");b=this.getElementsByTagName("*");for(o=0;n=b[o++];)if((i=n.className)&&k.test(i)){if(j)return n;if(!p||!a.uniques[a.getUIDHTML(n)])f.push(n)}}p&&a.sort(f);return j?null:true});a.override(/^#[\w-]+$/,function(b,f,j){if(!a.isHTMLDocument||this.nodeType!=9)return false;var n=b.substring(1);b=this.getElementById(n);
if(!b)return f;if(a.idGetsName&&b.getAttributeNode("id").nodeValue!=n)return false;if(j)return b||null;j=!!f.length;if(!j||!a.uniques[a.getUIDHTML(b)])f.push(b);j&&a.sort(f);return true});typeof document!="undefined"&&a.setDocument(document);var h=a.Slick=this.Slick||{};h.version="0.9dev";h.search=function(b,f,j){return a.search(b,f,j)};h.find=function(b,f){return a.search(b,f,null,true)};h.contains=function(b,f){a.setDocument(b);return a.contains(b,f)};h.getAttribute=function(b,f){return a.getAttribute(b,
f)};h.match=function(b,f){if(!(b&&f))return false;if(!f||f===b)return true;if(typeof f!="string")return false;a.setDocument(b);return a.matchNode(b,f)};h.defineAttributeGetter=function(b,f){a.attributeGetters[b]=f;return this};h.lookupAttributeGetter=function(b){return a.attributeGetters[b]};h.definePseudo=function(b,f){a["pseudo:"+b]=function(j,n){return f.call(j,n)};return this};h.lookupPseudo=function(b){var f=a["pseudo:"+b];if(f)return function(j){return f.call(this,j)};return null};h.override=
function(b,f){a.override(b,f);return this};h.isXML=a.isXML;h.uidOf=function(b){return a.getUIDHTML(b)};if(!this.Slick)this.Slick=h}).apply(typeof exports!="undefined"?exports:this);
var Element=function(a,c){var d=Element.Constructors[a];if(d)return d(c);if(typeof a!="string")return document.id(a).set(c);c||(c={});if(!a.test(/^[\w-]+$/)){d=Slick.parse(a).expressions[0][0];a=d.tag=="*"?"div":d.tag;if(d.id&&c.id==null)c.id=d.id;var e=d.attributes;if(e)for(var g=0,h=e.length;g<h;g++){var b=e[g];if(b.value!=null&&b.operator=="="&&c[b.key]==null)c[b.key]=b.value}if(d.classList&&c["class"]==null)c["class"]=d.classList.join(" ")}return document.newElement(a,c)};
if(Browser.Element)Element.prototype=Browser.Element.prototype;(new Type("Element",Element)).mirror(function(a){if(!Array.prototype[a]){var c={};c[a]=function(){for(var d=[],e=arguments,g=true,h=0,b=this.length;h<b;h++){var f=this[h];f=d[h]=f[a].apply(f,e);g=g&&typeOf(f)=="element"}return g?new Elements(d):d};Elements.implement(c)}});if(!Browser.Element){Element.parent=Object;Element.Prototype={$family:Function.from("element").hide()};Element.mirror(function(a,c){Element.Prototype[a]=c})}
Element.Constructors={};Element.Constructors=new Hash;
var IFrame=new Type("IFrame",function(){var a=Array.link(arguments,{properties:Type.isObject,iframe:function(g){return g!=null}}),c=a.properties||{},d;if(a.iframe)d=document.id(a.iframe);var e=c.onload||function(){};delete c.onload;c.id=c.name=[c.id,c.name,d?d.id||d.name:"IFrame_"+String.uniqueID()].pick();d=new Element(d||"iframe",c);a=function(){e.call(d.contentWindow)};window.frames[c.id]?a():d.addListener("load",a);return d}),Elements=this.Elements=function(a){if(a&&a.length)for(var c={},d,e=
0;d=a[e++];){var g=Slick.uidOf(d);if(!c[g]){c[g]=true;this.push(d)}}};Elements.prototype={length:0};Elements.parent=Array;
(new Type("Elements",Elements)).implement({filter:function(a,c){if(!a)return this;return new Elements(Array.filter(this,typeOf(a)=="string"?function(d){return d.match(a)}:a,c))}.protect(),push:function(){for(var a=this.length,c=0,d=arguments.length;c<d;c++){var e=document.id(arguments[c]);if(e)this[a++]=e}return this.length=a}.protect(),concat:function(){for(var a=new Elements(this),c=0,d=arguments.length;c<d;c++){var e=arguments[c];Type.isEnumerable(e)?a.append(e):a.push(e)}return a}.protect(),append:function(a){for(var c=
0,d=a.length;c<d;c++)this.push(a[c]);return this}.protect(),empty:function(){for(;this.length;)delete this[--this.length];return this}.protect()});
(function(){var a=Array.prototype.splice,c={"0":0,"1":1,length:2};a.call(c,1,1);c[1]==1&&Elements.implement("splice",function(){var h=this.length;for(a.apply(this,arguments);h>=this.length;)delete this[h--];return this}.protect());Elements.implement(Array.prototype);Array.mirror(Elements);var d;try{d=document.createElement("<input name=x>").name=="x"}catch(e){}var g=function(h){return(""+h).replace(/&/g,"&amp;").replace(/"/g,"&quot;")};Document.implement({newElement:function(h,b){if(b&&b.checked!=
null)b.defaultChecked=b.checked;if(d&&b){h="<"+h;if(b.name)h+=' name="'+g(b.name)+'"';if(b.type)h+=' type="'+g(b.type)+'"';h+=">";delete b.name;delete b.type}return this.id(this.createElement(h)).set(b)}})})();
Document.implement({newTextNode:function(a){return this.createTextNode(a)},getDocument:function(){return this},getWindow:function(){return this.window},id:function(){var a={string:function(c,d,e){return(c=Slick.find(e,"#"+c.replace(/(\W)/g,"\\$1")))?a.element(c,d):null},element:function(c,d){$uid(c);!d&&!c.$family&&!/^object|embed$/i.test(c.tagName)&&Object.append(c,Element.Prototype);return c},object:function(c,d,e){if(c.toElement)return a.element(c.toElement(e),d);return null}};a.textnode=a.whitespace=
a.window=a.document=function(c){return c};return function(c,d,e){if(c&&c.$family&&c.uid)return c;var g=typeOf(c);return a[g]?a[g](c,d,e||document):null}}()});window.$==null&&Window.implement("$",function(a,c){return document.id(a,c,this.document)});Window.implement({getDocument:function(){return this.document},getWindow:function(){return this}});
[Document,Element].invoke("implement",{getElements:function(a){return Slick.search(this,a,new Elements)},getElement:function(a){return document.id(Slick.find(this,a))}});
(function(a,c,d){this.Selectors={};var e=this.Selectors.Pseudo=new Hash,g=function(){for(var h in e)if(e.hasOwnProperty(h)){Slick.definePseudo(h,e[h]);delete e[h]}};Slick.search=function(h,b,f){g();return a.call(this,h,b,f)};Slick.find=function(h,b){g();return c.call(this,h,b)};Slick.match=function(h,b){g();return d.call(this,h,b)}})(Slick.search,Slick.find,Slick.match);
window.$$==null&&Window.implement("$$",function(a){var c=new Elements;if(arguments.length==1&&typeof a=="string")return Slick.search(this.document,a,c);for(var d=Array.flatten(arguments),e=0,g=d.length;e<g;e++){var h=d[e];switch(typeOf(h)){case "element":c.push(h);break;case "string":Slick.search(this.document,h,c)}}return c});
window.$$==null&&Window.implement("$$",function(a){if(arguments.length==1)if(typeof a=="string")return Slick.search(this.document,a,new Elements);else if(Type.isEnumerable(a))return new Elements(a);return new Elements(arguments)});
(function(){var a={},c={},d={input:"checked",option:"selected",textarea:"value"},e=function(i){i.removeEvents&&i.removeEvents();i.clearAttributes&&i.clearAttributes();var k=i.uid;if(k!=null){delete a[k];delete c[k]}return i},g=["defaultValue","accessKey","cellPadding","cellSpacing","colSpan","frameBorder","maxLength","readOnly","rowSpan","tabIndex","useMap"],h=["compact","nowrap","ismap","declare","noshade","checked","disabled","readOnly","multiple","selected","noresize","defer"],b={html:"innerHTML",
"class":"className","for":"htmlFor",text:document.createElement("div").innerText==null?"textContent":"innerText"},f=["type"],j=["value","defaultValue"],n=/^(?:href|src|usemap)$/i;h=h.associate(h);g=g.associate(g.map(String.toLowerCase));f=f.associate(f);Object.append(b,j.associate(j));var o={before:function(i,k){var m=k.parentNode;m&&m.insertBefore(i,k)},after:function(i,k){var m=k.parentNode;m&&m.insertBefore(i,k.nextSibling)},bottom:function(i,k){k.appendChild(i)},top:function(i,k){k.insertBefore(i,
k.firstChild)}};o.inside=o.bottom;Object.each(o,function(i,k){k=k.capitalize();var m={};m["inject"+k]=function(u){i(this,document.id(u,true));return this};m["grab"+k]=function(u){i(document.id(u,true),this);return this};Element.implement(m)});var p=function(i,k){if(!i)return k;i=Slick.parse(i);for(var m=i.expressions,u=m.length;u--;)m[u][0].combinator=k;return i};Element.implement({set:function(i,k){var m=Element.Properties[i];m&&m.set?m.set.call(this,k):this.setProperty(i,k)}.overloadSetter(),get:function(i){var k=
Element.Properties[i];return k&&k.get?k.get.apply(this):this.getProperty(i)}.overloadGetter(),erase:function(i){var k=Element.Properties[i];k&&k.erase?k.erase.apply(this):this.removeProperty(i);return this},setProperty:function(i,k){i=g[i]||i;if(k==null)return this.removeProperty(i);var m=b[i];m?this[m]=k:h[i]?this[i]=!!k:this.setAttribute(i,""+k);return this},setProperties:function(i){for(var k in i)this.setProperty(k,i[k]);return this},getProperty:function(i){i=g[i]||i;var k=b[i]||f[i];return k?
this[k]:h[i]?!!this[i]:(n.test(i)?this.getAttribute(i,2):(k=this.getAttributeNode(i))?k.nodeValue:null)||null},getProperties:function(){var i=Array.from(arguments);return i.map(this.getProperty,this).associate(i)},removeProperty:function(i){i=g[i]||i;var k=b[i];k?this[k]="":h[i]?this[i]=false:this.removeAttribute(i);return this},removeProperties:function(){Array.each(arguments,this.removeProperty,this);return this},hasClass:function(i){return this.className.clean().contains(i," ")},addClass:function(i){if(!this.hasClass(i))this.className=
(this.className+" "+i).clean();return this},removeClass:function(i){this.className=this.className.replace(RegExp("(^|\\s)"+i+"(?:\\s|$)"),"$1");return this},toggleClass:function(i,k){if(k==null)k=!this.hasClass(i);return k?this.addClass(i):this.removeClass(i)},adopt:function(){var i=this,k,m=Array.flatten(arguments),u=m.length;if(u>1)i=k=document.createDocumentFragment();for(var v=0;v<u;v++){var y=document.id(m[v],true);y&&i.appendChild(y)}k&&this.appendChild(k);return this},appendText:function(i,
k){return this.grab(this.getDocument().newTextNode(i),k)},grab:function(i,k){o[k||"bottom"](document.id(i,true),this);return this},inject:function(i,k){o[k||"bottom"](this,document.id(i,true));return this},replaces:function(i){i=document.id(i,true);i.parentNode.replaceChild(this,i);return this},wraps:function(i,k){i=document.id(i,true);return this.replaces(i).grab(i,k)},getPrevious:function(i){return document.id(Slick.find(this,p(i,"!~")))},getAllPrevious:function(i){return Slick.search(this,p(i,
"!~"),new Elements)},getNext:function(i){return document.id(Slick.find(this,p(i,"~")))},getAllNext:function(i){return Slick.search(this,p(i,"~"),new Elements)},getFirst:function(i){return document.id(Slick.search(this,p(i,">"))[0])},getLast:function(i){return document.id(Slick.search(this,p(i,">")).getLast())},getParent:function(i){return document.id(Slick.find(this,p(i,"!")))},getParents:function(i){return Slick.search(this,p(i,"!"),new Elements)},getSiblings:function(i){return Slick.search(this,
p(i,"~~"),new Elements)},getChildren:function(i){return Slick.search(this,p(i,">"),new Elements)},getWindow:function(){return this.ownerDocument.window},getDocument:function(){return this.ownerDocument},getElementById:function(i){return document.id(Slick.find(this,"#"+(""+i).replace(/(\W)/g,"\\$1")))},getSelected:function(){return new Elements(Array.from(this.options).filter(function(i){return i.selected}))},toQueryString:function(){var i=[];this.getElements("input, select, textarea").each(function(k){var m=
k.type;if(!(!k.name||k.disabled||m=="submit"||m=="reset"||m=="file"||m=="image")){m=k.get("tag")=="select"?k.getSelected().map(function(u){return document.id(u).get("value")}):(m=="radio"||m=="checkbox")&&!k.checked?null:k.get("value");Array.from(m).each(function(u){typeof u!="undefined"&&i.push(encodeURIComponent(k.name)+"="+encodeURIComponent(u))})}});return i.join("&")},clone:function(i,k){i=i!==false;var m=this.cloneNode(i),u=function(q,r){k||q.removeAttribute("id");if(Browser.ie){q.clearAttributes();
q.mergeAttributes(r);q.removeAttribute("uid");if(q.options)for(var s=q.options,x=r.options,t=s.length;t--;)s[t].selected=x[t].selected}if((s=d[r.tagName.toLowerCase()])&&r[s])q[s]=r[s]},v;if(i){var y=m.getElementsByTagName("*"),z=this.getElementsByTagName("*");for(v=y.length;v--;)u(y[v],z[v])}u(m,this);if(Browser.ie){u=this.getElementsByTagName("object");y=m.getElementsByTagName("object");z=u.length;var l=y.length;for(v=0;v<z&&v<l;v++)y[v].outerHTML=u[v].outerHTML}return document.id(m)},destroy:function(){var i=
e(this).getElementsByTagName("*");Array.each(i,e);Element.dispose(this);return null},empty:function(){Array.from(this.childNodes).each(Element.dispose);return this},dispose:function(){return this.parentNode?this.parentNode.removeChild(this):this},match:function(i){return!i||Slick.match(this,i)}});j={contains:function(i){return Slick.contains(this,i)}};document.contains||Document.implement(j);document.createElement("div").contains||Element.implement(j);Element.implement("hasChild",function(i){return this!==
i&&this.contains(i)});[Element,Window,Document].invoke("implement",{addListener:function(i,k){if(i=="unload"){var m=k,u=this;k=function(){u.removeListener("unload",k);m()}}else a[this.uid]=this;this.addEventListener?this.addEventListener(i,k,false):this.attachEvent("on"+i,k);return this},removeListener:function(i,k){this.removeEventListener?this.removeEventListener(i,k,false):this.detachEvent("on"+i,k);return this},retrieve:function(i,k){var m=c[this.uid]||(c[this.uid]={}),u=m[i];if(k!=null&&u==null)u=
m[i]=k;return u!=null?u:null},store:function(i,k){(c[this.uid]||(c[this.uid]={}))[i]=k;return this},eliminate:function(i){delete (c[this.uid]||(c[this.uid]={}))[i];return this}});window.attachEvent&&!window.addEventListener&&window.addListener("unload",function(){Object.each(a,e);window.CollectGarbage&&CollectGarbage()})})();Element.Properties={};Element.Properties=new Hash;
Element.Properties.style={set:function(a){this.style.cssText=a},get:function(){return this.style.cssText},erase:function(){this.style.cssText=""}};Element.Properties.tag={get:function(){return this.tagName.toLowerCase()}};(function(a){if(a!=null)Element.Properties.maxlength=Element.Properties.maxLength={get:function(){var c=this.getAttribute("maxLength");return c==a?null:c}}})(document.createElement("input").getAttribute("maxLength"));
Element.Properties.html=function(){var a=Function.attempt(function(){document.createElement("table").innerHTML="<tr><td></td></tr>"}),c=document.createElement("div"),d={table:[1,"<table>","</table>"],select:[1,"<select>","</select>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"]};d.thead=d.tfoot=d.tbody;var e={set:function(){var g=Array.flatten(arguments).join(""),h=!a&&d[this.get("tag")];if(h){var b=c;b.innerHTML=h[1]+g+h[2];for(g=h[0];g--;)b=b.firstChild;
this.empty().adopt(b.childNodes)}else this.innerHTML=g}};e.erase=e.set;return e}();
(function(){var a=document.html;Element.Properties.styles={set:function(h){this.setStyles(h)}};var c=a.style.opacity!=null,d=/alpha\(opacity=([\d.]+)\)/i,e=function(h,b){if(!h.currentStyle||!h.currentStyle.hasLayout)h.style.zoom=1;if(c)h.style.opacity=b;else{b=b==1?"":"alpha(opacity="+b*100+")";var f=h.style.filter||h.getComputedStyle("filter")||"";h.style.filter=f.test(d)?f.replace(d,b):f+b}};Element.Properties.opacity={set:function(h){var b=this.style.visibility;if(h==0&&b!="hidden")this.style.visibility=
"hidden";else if(h!=0&&b!="visible")this.style.visibility="visible";e(this,h)},get:c?function(){var h=this.style.opacity||this.getComputedStyle("opacity");return h==""?1:h}:function(){var h,b=this.style.filter||this.getComputedStyle("filter");if(b)h=b.match(d);return h==null||b==null?1:h[1]/100}};var g=a.style.cssFloat==null?"styleFloat":"cssFloat";Element.implement({getComputedStyle:function(h){if(this.currentStyle)return this.currentStyle[h.camelCase()];var b=Element.getDocument(this).defaultView;
return(b=b?b.getComputedStyle(this,null):null)?b.getPropertyValue(h==g?"float":h.hyphenate()):null},setOpacity:function(h){e(this,h);return this},getOpacity:function(){return this.get("opacity")},setStyle:function(h,b){switch(h){case "opacity":return this.set("opacity",parseFloat(b));case "float":h=g}h=h.camelCase();if(typeOf(b)!="string"){var f=(Element.Styles[h]||"@").split(" ");b=Array.from(b).map(function(j,n){if(!f[n])return"";return typeOf(j)=="number"?f[n].replace("@",Math.round(j)):j}).join(" ")}else if(b==
String(Number(b)))b=Math.round(b);this.style[h]=b;return this},getStyle:function(h){switch(h){case "opacity":return this.get("opacity");case "float":h=g}h=h.camelCase();var b=this.style[h];if(!b||h=="zIndex"){b=[];for(var f in Element.ShortStyles)if(h==f){for(var j in Element.ShortStyles[f])b.push(this.getStyle(j));return b.join(" ")}b=this.getComputedStyle(h)}if(b){b=String(b);if(f=b.match(/rgba?\([\d\s,]+\)/))b=b.replace(f[0],f[0].rgbToHex())}if(Browser.opera||Browser.ie&&isNaN(parseFloat(b))){if(h.test(/^(height|width)$/)){var n=
0;(h=="width"?["left","right"]:["top","bottom"]).each(function(o){n+=this.getStyle("border-"+o+"-width").toInt()+this.getStyle("padding-"+o).toInt()},this);return this["offset"+h.capitalize()]-n+"px"}if(Browser.opera&&String(b).indexOf("px")!=-1)return b;if(h.test(/(border(.+)Width|margin|padding)/))return"0px"}return b},setStyles:function(h){for(var b in h)this.setStyle(b,h[b]);return this},getStyles:function(){var h={};Array.flatten(arguments).each(function(b){h[b]=this.getStyle(b)},this);return h}});
Element.Styles={left:"@px",top:"@px",bottom:"@px",right:"@px",width:"@px",height:"@px",maxWidth:"@px",maxHeight:"@px",minWidth:"@px",minHeight:"@px",backgroundColor:"rgb(@, @, @)",backgroundPosition:"@px @px",color:"rgb(@, @, @)",fontSize:"@px",letterSpacing:"@px",lineHeight:"@px",clip:"rect(@px @px @px @px)",margin:"@px @px @px @px",padding:"@px @px @px @px",border:"@px @ rgb(@, @, @) @px @ rgb(@, @, @) @px @ rgb(@, @, @)",borderWidth:"@px @px @px @px",borderStyle:"@ @ @ @",borderColor:"rgb(@, @, @) rgb(@, @, @) rgb(@, @, @) rgb(@, @, @)",
zIndex:"@",zoom:"@",fontWeight:"@",textIndent:"@px",opacity:"@"};Element.Styles=new Hash(Element.Styles);Element.ShortStyles={margin:{},padding:{},border:{},borderWidth:{},borderStyle:{},borderColor:{}};["Top","Right","Bottom","Left"].each(function(h){var b=Element.ShortStyles,f=Element.Styles;["margin","padding"].each(function(i){var k=i+h;b[i][k]=f[k]="@px"});var j="border"+h;b.border[j]=f[j]="@px @ rgb(@, @, @)";var n=j+"Width",o=j+"Style",p=j+"Color";b[j]={};b.borderWidth[n]=b[j][n]=f[n]="@px";
b.borderStyle[o]=b[j][o]=f[o]="@";b.borderColor[p]=b[j][p]=f[p]="rgb(@, @, @)"})})();
(function(){Element.Properties.events={set:function(d){this.addEvents(d)}};[Element,Window,Document].invoke("implement",{addEvent:function(d,e){var g=this.retrieve("events",{});g[d]||(g[d]={keys:[],values:[]});if(g[d].keys.contains(e))return this;g[d].keys.push(e);var h=d,b=Element.Events[d],f=e,j=this;if(b){b.onAdd&&b.onAdd.call(this,e);if(b.condition)f=function(p){if(b.condition.call(this,p))return e.call(this,p);return true};h=b.base||h}var n=function(){return e.call(j)},o=Element.NativeEvents[h];
if(o){if(o==2)n=function(p){p=new Event(p,j.getWindow());f.call(j,p)===false&&p.stop()};this.addListener(h,n)}g[d].values.push(n);return this},removeEvent:function(d,e){var g=this.retrieve("events");if(!g||!g[d])return this;var h=g[d],b=h.keys.indexOf(e);if(b==-1)return this;g=h.values[b];delete h.keys[b];delete h.values[b];if(h=Element.Events[d]){h.onRemove&&h.onRemove.call(this,e);d=h.base||d}return Element.NativeEvents[d]?this.removeListener(d,g):this},addEvents:function(d){for(var e in d)this.addEvent(e,
d[e]);return this},removeEvents:function(d){var e;if(typeOf(d)=="object"){for(e in d)this.removeEvent(e,d[e]);return this}var g=this.retrieve("events");if(!g)return this;if(d){if(g[d]){g[d].keys.each(function(h){this.removeEvent(d,h)},this);delete g[d]}}else{for(e in g)this.removeEvents(e);this.eliminate("events")}return this},fireEvent:function(d,e,g){var h=this.retrieve("events");if(!h||!h[d])return this;e=Array.from(e);h[d].keys.each(function(b){g?b.delay(g,this,e):b.apply(this,e)},this);return this},
cloneEvents:function(d,e){d=document.id(d);var g=d.retrieve("events");if(!g)return this;if(e)g[e]&&g[e].keys.each(function(b){this.addEvent(e,b)},this);else for(var h in g)this.cloneEvents(d,h);return this}});try{if(typeof HTMLElement!="undefined")HTMLElement.prototype.fireEvent=Element.prototype.fireEvent}catch(a){}Element.NativeEvents={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,
keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1};var c=function(d){d=d.relatedTarget;if(d==null)return true;if(!d)return false;return d!=this&&d.prefix!="xul"&&typeOf(this)!="document"&&!this.contains(d)};Element.Events={mouseenter:{base:"mouseover",condition:c},mouseleave:{base:"mouseout",
condition:c},mousewheel:{base:Browser.firefox?"DOMMouseScroll":"mousewheel"}};Element.Events=new Hash(Element.Events)})();
(function(){function a(b){return h(b,"-moz-box-sizing")=="border-box"}function c(b){return h(b,"border-top-width").toInt()||0}function d(b){return h(b,"border-left-width").toInt()||0}function e(b){return/^(?:body|html)$/i.test(b.tagName)}function g(b){b=b.getDocument();return!b.compatMode||b.compatMode=="CSS1Compat"?b.html:b.body}Element.implement({scrollTo:function(b,f){if(e(this))this.getWindow().scrollTo(b,f);else{this.scrollLeft=b;this.scrollTop=f}return this},getSize:function(){if(e(this))return this.getWindow().getSize();
return{x:this.offsetWidth,y:this.offsetHeight}},getScrollSize:function(){if(e(this))return this.getWindow().getScrollSize();return{x:this.scrollWidth,y:this.scrollHeight}},getScroll:function(){if(e(this))return this.getWindow().getScroll();return{x:this.scrollLeft,y:this.scrollTop}},getScrolls:function(){for(var b=this.parentNode,f={x:0,y:0};b&&!e(b);){f.x+=b.scrollLeft;f.y+=b.scrollTop;b=b.parentNode}return f},getOffsetParent:function(){var b=this;if(e(b))return null;if(!Browser.ie)return b.offsetParent;
for(;b=b.parentNode;)if(h(b,"position")!="static"||e(b))return b;return null},getOffsets:function(){if(this.getBoundingClientRect&&!Browser.Platform.ios){var b=this.getBoundingClientRect(),f=document.id(this.getDocument().documentElement),j=f.getScroll(),n=this.getScrolls(),o=h(this,"position")=="fixed";return{x:b.left.toInt()+n.x+(o?0:j.x)-f.clientLeft,y:b.top.toInt()+n.y+(o?0:j.y)-f.clientTop}}b=this;f={x:0,y:0};if(e(this))return f;for(;b&&!e(b);){f.x+=b.offsetLeft;f.y+=b.offsetTop;if(Browser.firefox){if(!a(b)){f.x+=
d(b);f.y+=c(b)}if((j=b.parentNode)&&h(j,"overflow")!="visible"){f.x+=d(j);f.y+=c(j)}}else if(b!=this&&Browser.safari){f.x+=d(b);f.y+=c(b)}b=b.offsetParent}if(Browser.firefox&&!a(this)){f.x-=d(this);f.y-=c(this)}return f},getPosition:function(b){if(e(this))return{x:0,y:0};var f=this.getOffsets(),j=this.getScrolls();f={x:f.x-j.x,y:f.y-j.y};if(b&&(b=document.id(b))){j=b.getPosition();return{x:f.x-j.x-d(b),y:f.y-j.y-c(b)}}return f},getCoordinates:function(b){if(e(this))return this.getWindow().getCoordinates();
b=this.getPosition(b);var f=this.getSize();b={left:b.x,top:b.y,width:f.x,height:f.y};b.right=b.left+b.width;b.bottom=b.top+b.height;return b},computePosition:function(b){return{left:b.x-(h(this,"margin-left").toInt()||0),top:b.y-(h(this,"margin-top").toInt()||0)}},setPosition:function(b){return this.setStyles(this.computePosition(b))}});[Document,Window].invoke("implement",{getSize:function(){var b=g(this);return{x:b.clientWidth,y:b.clientHeight}},getScroll:function(){var b=this.getWindow(),f=g(this);
return{x:b.pageXOffset||f.scrollLeft,y:b.pageYOffset||f.scrollTop}},getScrollSize:function(){var b=g(this),f=this.getSize(),j=this.getDocument().body;return{x:Math.max(b.scrollWidth,j.scrollWidth,f.x),y:Math.max(b.scrollHeight,j.scrollHeight,f.y)}},getPosition:function(){return{x:0,y:0}},getCoordinates:function(){var b=this.getSize();return{top:0,left:0,bottom:b.y,right:b.x,height:b.y,width:b.x}}});var h=Element.getComputedStyle})();Element.alias({position:"setPosition"});
[Window,Document,Element].invoke("implement",{getHeight:function(){return this.getSize().y},getWidth:function(){return this.getSize().x},getScrollTop:function(){return this.getScroll().y},getScrollLeft:function(){return this.getScroll().x},getScrollHeight:function(){return this.getScrollSize().y},getScrollWidth:function(){return this.getScrollSize().x},getTop:function(){return this.getPosition().y},getLeft:function(){return this.getPosition().x}});
(function(){var a=this.Class=new Type("Class",function(h){if(instanceOf(h,Function))h={initialize:h};var b=function(){d(this);if(b.$prototyping)return this;this.$caller=null;var f=this.initialize?this.initialize.apply(this,arguments):this;this.$caller=this.caller=null;return f}.extend(this).implement(h);b.$constructor=a;b.prototype.$constructor=b;b.prototype.parent=c;return b}),c=function(){if(!this.$caller)throw Error('The method "parent" cannot be called.');var h=this.$caller.$name,b=this.$caller.$owner.parent;
b=b?b.prototype[h]:null;if(!b)throw Error('The method "'+h+'" has no parent.');return b.apply(this,arguments)},d=function(h){for(var b in h){var f=h[b];switch(typeOf(f)){case "object":var j=function(){};j.prototype=f;h[b]=d(new j);break;case "array":h[b]=f.clone()}}return h},e=function(h,b,f){if(f.$origin)f=f.$origin;var j=function(){if(f.$protected&&this.$caller==null)throw Error('The method "'+b+'" cannot be called.');var n=this.caller,o=this.$caller;this.caller=o;this.$caller=j;var p=f.apply(this,
arguments);this.$caller=o;this.caller=n;return p}.extend({$owner:h,$origin:f,$name:b});return j},g=function(h,b,f){if(a.Mutators.hasOwnProperty(h)){b=a.Mutators[h].call(this,b);if(b==null)return this}if(typeOf(b)=="function"){if(b.$hidden)return this;this.prototype[h]=f?b:e(this,h,b)}else Object.merge(this.prototype,h,b);return this};a.implement("implement",g.overloadSetter());a.Mutators={Extends:function(h){this.parent=h;h.$prototyping=true;var b=new h;delete h.$prototyping;this.prototype=b},Implements:function(h){Array.from(h).each(function(b){b=
new b;for(var f in b)g.call(this,f,b[f],true)},this)}}})();
(function(){this.Chain=new Class({$chain:[],chain:function(){this.$chain.append(Array.flatten(arguments));return this},callChain:function(){return this.$chain.length?this.$chain.shift().apply(this,arguments):false},clearChain:function(){this.$chain.empty();return this}});var a=function(c){return c.replace(/^on([A-Z])/,function(d,e){return e.toLowerCase()})};this.Events=new Class({$events:{},addEvent:function(c,d,e){c=a(c);if(d==$empty)return this;this.$events[c]=(this.$events[c]||[]).include(d);if(e)d.internal=
true;return this},addEvents:function(c){for(var d in c)this.addEvent(d,c[d]);return this},fireEvent:function(c,d,e){c=a(c);c=this.$events[c];if(!c)return this;d=Array.from(d);c.each(function(g){e?g.delay(e,this,d):g.apply(this,d)},this);return this},removeEvent:function(c,d){c=a(c);var e=this.$events[c];if(e&&!d.internal){var g=e.indexOf(d);g!=-1&&delete e[g]}return this},removeEvents:function(c){var d;if(typeOf(c)=="object"){for(d in c)this.removeEvent(d,c[d]);return this}if(c)c=a(c);for(d in this.$events)if(!(c&&
c!=d))for(var e=this.$events[d],g=e.length;g--;)this.removeEvent(d,e[g]);return this}});this.Options=new Class({setOptions:function(){var c=this.options=Object.merge.apply(null,[{},this.options].append(arguments));if(!this.addEvent)return this;for(var d in c)if(!(typeOf(c[d])!="function"||!/^on[A-Z]/.test(d))){this.addEvent(d,c[d]);delete c[d]}return this}})})();
(function(){var a="onprogress"in new Browser.Request,c=this.Request=new Class({Implements:[Chain,Events,Options],options:{url:"",data:"",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},async:true,format:false,method:"post",link:"ignore",isSuccess:null,emulation:true,urlEncoded:true,encoding:"utf-8",evalScripts:false,evalResponse:false,timeout:0,noCache:false},initialize:function(e){this.xhr=new Browser.Request;this.setOptions(e);this.headers=
this.options.headers},onStateChange:function(){var e=this.xhr;if(!(e.readyState!=4||!this.running)){this.running=false;this.status=0;Function.attempt(function(){var g=e.status;this.status=g==1223?204:g}.bind(this));e.onreadystatechange=function(){};clearTimeout(this.timer);this.response={text:this.xhr.responseText||"",xml:this.xhr.responseXML};this.options.isSuccess.call(this,this.status)?this.success(this.response.text,this.response.xml):this.failure()}},isSuccess:function(){var e=this.status;return e>=
200&&e<300},isRunning:function(){return!!this.running},processScripts:function(e){if(this.options.evalResponse||/(ecma|java)script/.test(this.getHeader("Content-type")))return Browser.exec(e);return e.stripScripts(this.options.evalScripts)},success:function(e,g){this.onSuccess(this.processScripts(e),g)},onSuccess:function(){this.fireEvent("complete",arguments).fireEvent("success",arguments).callChain()},failure:function(){this.onFailure()},onFailure:function(){this.fireEvent("complete").fireEvent("failure",
this.xhr)},loadstart:function(e){this.fireEvent("loadstart",[e,this.xhr])},progress:function(e){this.fireEvent("progress",[e,this.xhr])},timeout:function(){this.fireEvent("timeout",this.xhr)},setHeader:function(e,g){this.headers[e]=g;return this},getHeader:function(e){return Function.attempt(function(){return this.xhr.getResponseHeader(e)}.bind(this))},check:function(){if(!this.running)return true;switch(this.options.link){case "cancel":this.cancel();return true;case "chain":this.chain(this.caller.pass(arguments,
this))}return false},send:function(e){if(!this.check(e))return this;this.options.isSuccess=this.options.isSuccess||this.isSuccess;this.running=true;var g=typeOf(e);if(g=="string"||g=="element")e={data:e};g=this.options;e=Object.append({data:g.data,url:g.url,method:g.method},e);g=e.data;var h=String(e.url);e=e.method.toLowerCase();switch(typeOf(g)){case "element":g=document.id(g).toQueryString();break;case "object":case "hash":g=Object.toQueryString(g)}if(this.options.format){var b="format="+this.options.format;
g=g?b+"&"+g:b}if(this.options.emulation&&!["get","post"].contains(e)){e="_method="+e;g=g?e+"&"+g:e;e="post"}if(this.options.urlEncoded&&["post","put"].contains(e))this.headers["Content-type"]="application/x-www-form-urlencoded"+(this.options.encoding?"; charset="+this.options.encoding:"");if(!h)h=document.location.pathname;b=h.lastIndexOf("/");if(b>-1&&(b=h.indexOf("#"))>-1)h=h.substr(0,b);if(this.options.noCache)h+=(h.contains("?")?"&":"?")+String.uniqueID();if(g&&e=="get"){h+=(h.contains("?")?"&":
"?")+g;g=null}var f=this.xhr;if(a){f.onloadstart=this.loadstart.bind(this);f.onprogress=this.progress.bind(this)}f.open(e.toUpperCase(),h,this.options.async,this.options.user,this.options.password);if(this.options.user&&"withCredentials"in f)f.withCredentials=true;f.onreadystatechange=this.onStateChange.bind(this);Object.each(this.headers,function(j,n){try{f.setRequestHeader(n,j)}catch(o){this.fireEvent("exception",[n,j])}},this);this.fireEvent("request");f.send(g);if(!this.options.async)this.onStateChange();
if(this.options.timeout)this.timer=this.timeout.delay(this.options.timeout,this);return this},cancel:function(){if(!this.running)return this;this.running=false;var e=this.xhr;e.abort();clearTimeout(this.timer);e.onreadystatechange=e.onprogress=e.onloadstart=function(){};this.xhr=new Browser.Request;this.fireEvent("cancel");return this}}),d={};["get","post","put","delete","GET","POST","PUT","DELETE"].each(function(e){d[e]=function(g){return this.send({data:g,method:e})}});c.implement(d);Element.Properties.send=
{set:function(e){this.get("send").cancel().setOptions(e);return this},get:function(){var e=this.retrieve("send");if(!e){e=new c({data:this,link:"cancel",method:this.get("method")||"post",url:this.get("action")});this.store("send",e)}return e}};Element.implement({send:function(e){var g=this.get("send");g.send({data:this,url:e||g.options.url});return this}})})();if(!this.JSON)this.JSON={};JSON=new Hash({stringify:JSON.stringify,parse:JSON.parse});
Object.append(JSON,{$specialChars:{"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},$replaceChars:function(a){return JSON.$specialChars[a]||"\\u00"+Math.floor(a.charCodeAt()/16).toString(16)+(a.charCodeAt()%16).toString(16)},encode:function(a){switch(typeOf(a)){case "string":return'"'+a.replace(/[\x00-\x1f\\"]/g,JSON.$replaceChars)+'"';case "array":return"["+String(a.map(JSON.encode).clean())+"]";case "object":case "hash":var c=[];Object.each(a,function(d,e){var g=
JSON.encode(d);g&&c.push(JSON.encode(e)+":"+g)});return"{"+c+"}";case "number":case "boolean":return String(a);case "null":return"null"}return null},decode:function(a,c){if(typeOf(a)!="string"||!a.length)return null;if(c&&!/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(a.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"")))return null;return eval("("+a+")")}});
Request.JSON=new Class({Extends:Request,options:{secure:true},initialize:function(a){this.parent(a);Object.append(this.headers,{Accept:"application/json","X-Request":"JSON"})},success:function(a){var c=this.options.secure,d=this.response.json=Function.attempt(function(){return JSON.decode(a,c)});if(d==null)this.onFailure();else this.onSuccess(d,a)}});
(function(a,c){var d,e,g=[],h,b,f=true;try{f=a.frameElement!=null}catch(j){}var n=function(){clearTimeout(b);if(!d){Browser.loaded=d=true;c.removeListener("DOMContentLoaded",n).removeListener("readystatechange",o);c.fireEvent("domready");a.fireEvent("domready")}},o=function(){for(var k=g.length;k--;)if(g[k]()){n();return true}return false},p=function(){clearTimeout(b);o()||(b=setTimeout(p,10))};c.addListener("DOMContentLoaded",n);var i=c.createElement("div");if(i.doScroll&&!f){g.push(function(){try{i.doScroll();
return true}catch(k){}return false});h=true}c.readyState&&g.push(function(){var k=c.readyState;return k=="loaded"||k=="complete"});if("onreadystatechange"in c)c.addListener("readystatechange",o);else h=true;h&&p();Element.Events.domready={onAdd:function(k){d&&k.call(this)}};Element.Events.load={base:"load",onAdd:function(k){e&&this==a&&k.call(this)},condition:function(){if(this==a){n();delete Element.Events.load}return true}};a.addEvent("load",function(){e=true})})(window,document);
MooTools.More={version:"1.3.0.1",build:"6dce99bed2792dffcbbbb4ddc15a1fb9a41994b5"};
var Asset={javascript:function(a,c){c=Object.append({document:document},c);if(c.onLoad){c.onload=c.onLoad;delete c.onLoad}var d=new Element("script",{src:a,type:"text/javascript"}),e=c.onload||function(){},g=c.document;delete c.onload;delete c.document;return d.addEvents({load:e,readystatechange:function(){["loaded","complete"].contains(this.readyState)&&e.call(this)}}).set(c).inject(g.head)},css:function(a,c){c=c||{};var d=c.onload||c.onLoad;if(d){c.events=c.events||{};c.events.load=d;delete c.onload;
delete c.onLoad}return(new Element("link",Object.merge({rel:"stylesheet",media:"screen",type:"text/css",href:a},c))).inject(document.head)},image:function(a,c){c=Object.merge({onload:function(){},onabort:function(){},onerror:function(){}},c);var d=new Image,e=document.id(d)||new Element("img");["load","abort","error"].each(function(g){var h="on"+g,b=g.capitalize();if(c["on"+b]){c[h]=c["on"+b];delete c["on"+b]}var f=c[h];delete c[h];d[h]=function(){if(d){if(!e.parentNode){e.width=d.width;e.height=
d.height}d=d.onload=d.onabort=d.onerror=null;f.delay(1,e,e);e.fireEvent(g,e,1)}}});d.src=e.src=a;d&&d.complete&&d.onload.delay(1);return e.set(c)},images:function(a,c){c=Object.merge({onComplete:function(){},onProgress:function(){},onError:function(){},properties:{}},c);a=Array.from(a);var d=0;return new Elements(a.map(function(e,g){return Asset.image(e,Object.append(c.properties,{onload:function(){d++;c.onProgress.call(this,d,g,e);if(d==a.length)c.onComplete()},onerror:function(){d++;c.onError.call(this,
d,g,e);if(d==a.length)c.onComplete()}}))}))}},device={width:function(){return window.innerWidth},height:function(){if(this.name()=="iPhone3G"||this.name()=="iPhone4G")if(window.innerHeight==416&&orientationObserver.getOrientation()=="portrait")return window.innerHeight;else if(window.innerHeight<416&&orientationObserver.getOrientation()=="portrait")return window.innerHeight+60;else if(window.innerHeight>250&&orientationObserver.getOrientation()=="landscape")return window.innerHeight;else{if(window.innerHeight<
250&&orientationObserver.getOrientation()=="landscape")return window.innerHeight+60}else return window.innerHeight},proportions:function(){return(this.width()/this.height()).toFixed(2)},name:function(){var a;a=window.innerWidth<=480&&Browser.Platform.ios&&orientationObserver.getOrientation()=="landscape"?"iPhone3G":"other";a=window.innerWidth<=320&&Browser.Platform.ios&&orientationObserver.getOrientation()=="portrait"?"iPhone3G":a;a=window.innerWidth<=960&&window.innerWidth>480&&Browser.Platform.ios&&
orientationObserver.getOrientation()=="landscape"?"iPhone4G":a;a=window.innerWidth<=640&&window.innerWidth>320&&Browser.Platform.ios&&orientationObserver.getOrientation()=="portrait"?"iPhone4G":a;a=window.innerWidth<=1024&&window.innerWidth>960&&Browser.Platform.ios&&orientationObserver.getOrientation()=="landscape"?"iPad":a;return a=window.innerWidth<=768&&window.innerWidth>640&&Browser.Platform.ios&&orientationObserver.getOrientation()=="portrait"?"iPad":a}},workspace={draw:function(){if(document.getElementById("mainFrame")&&
document.getElementById("body")){document.getElementById("mainFrame").setStyles({width:device.width(),height:device.height()});document.getElementById("body").setStyles({width:device.width(),height:device.height()})}else alert("Error (NO mainFrame)")},reDraw:function(){if(document.getElementById("mainFrame")&&document.getElementById("body")){document.getElementById("mainFrame").setStyles({width:device.width(),height:device.height()});document.getElementById("body").setStyles({width:device.width(),
height:device.height()})}else alert("Error (NO mainFrame)")}},toolbar={toolbarHeight:40,status:"hide",installed:false,draw:function(){document.getElementById("topToolbar")||(new Element("div",{"class":"topToolbar",id:"topToolbar"})).inject("body").setStyles({height:this.toolbarHeight+"px",top:"-"+this.toolbarHeight-2+"px"}).set("text","").addEvents({touchmove:function(){event.preventDefault()}});if(!$("bottomToolbar")){var a=(new Element("div",{"class":"bottomToolbar",id:"bottomToolbar"})).inject("body").setStyles({height:this.toolbarHeight+
"px",bottom:"-"+this.toolbarHeight-2+"px"}).set("text","");a.addEvents({touchmove:function(){event.preventDefault()}});var c=dir==null?photographer_src:"styles/";(new Element("img",{src:c+"arrowRight.png",styles:{height:this.toolbarHeight*0.75+"px",margin:this.toolbarHeight*0.125+"px 15px 0 0",cursor:"pointer","float":"right"}})).inject(a).addEvent("click",function(){eventTrigger.check("fx")&&pageMediator.next()});(new Element("img",{src:c+"arrowLeft.png",styles:{height:this.toolbarHeight*0.75+"px",
margin:this.toolbarHeight*0.125+"px 15px 0 0",cursor:"pointer","float":"right"}})).inject(a).addEvent("click",function(){eventTrigger.check("fx")&&pageMediator.prev()})}this.setToolbarHeight();this.installed=true},setToolbarHeight:function(){switch(device.name()){case "iPhone3G":this.toolbarHeight=40;break;case "iPhone4G":this.toolbarHeight=40;break;case "iPad":this.toolbarHeight=40;break;default:this.toolbarHeight=40}},toogle:function(){if(this.status=="show"){var a=-this.toolbarHeight-2;this.status=
"hide"}else{a=this.toolbarHeight+2;this.status="show"}document.getElementById("topToolbar").setStyles({"-webkit-transform-style":"flat","-webkit-transform":"translateY("+a+"px)","-webkit-transition":"0.3s"});document.getElementById("bottomToolbar").setStyles({"-webkit-transform-style":"flat","-webkit-transform":"translateY("+-a+"px)","-webkit-transition":"0.3s"});if(pager.state=="input"){pager.cancelInput();pager.change()}}};if(dir=="./<%=FilesFolderName%>/")dir="files";PATH_TO_PROPERTIES="../assets/mobile/";
if(dir==null)PATH_TO_PROPERTIES=photographer_dir;function startBook(a){if(orientationObserver.getOrientation()==="landscape")device.name()=="iPad"?twoPageBook.draw(a):onePageBook.draw(a);else orientationObserver.getOrientation()==="portrait"?onePageBook.draw(a):twoPageBook.draw(a)}
function start(){window.addEvent("domready",function(){loadFunc=function(){bookData.load(xml.responseXML);workspace.draw();toolbar.draw();orientationObserver.start();startBook(1);eventManager.start();pager.draw();pageMediator.change()};xml=new window.XMLHttpRequest;xml.open("GET",PATH_TO_PROPERTIES+"properties.xml",false);xml.onload=loadFunc;xml.send("")})}
var orientationObserver={start:function(){window.addEvent("orientationchange",function(){workspace.reDraw();if(device.name()=="iPad"||device.name()=="other")if(orientationObserver.getOrientation()=="landscape")if(onePageBook.installed&&onePageBook.zoom.state=="zoomOut"){var a=onePageBook.currentPage;onePageBook.destroy();(function(){twoPageBook.draw(a)}).delay(100,this)}else onePageBook.installed&&onePageBook.zoom.state=="zoomIn"&&zoomBook.reDraw("landscape");else{if(orientationObserver.getOrientation()==
"portrait")if(twoPageBook.installed&&twoPageBook.zoom.state=="zoomOut"){a=twoPageBook.currentPage.left==0?1:twoPageBook.currentPage.left;twoPageBook.destroy();(function(){onePageBook.draw(a)}).delay(100,this)}else twoPageBook.installed&&twoPageBook.zoom.state=="zoomIn"&&zoomBook.reDraw("portrait")}else if(onePageBook.installed&&onePageBook.zoom.state=="zoomOut"){a=onePageBook.currentPage;onePageBook.destroy();(function(){onePageBook.draw(a)}).delay(100,this)}else if(onePageBook.installed&&onePageBook.zoom.state==
"zoomIn"){var c=bookData.size.proportions>device.proportions()?(device.width()-30).toFixed(0):((device.height()-30)*bookData.size.proportions).toFixed(0);zoomBook.zoomFactor=onePageBook.zoom.zoomFactor=(zoomBook.pageWidth/c).toFixed(3)}pager.change()})},stop:function(){window.releaseEvents("orientationchange",destroy)},getOrientation:function(){if(Math.abs(window.orientation)===0||Math.abs(window.orientation)===180)return"portrait";if(Math.abs(window.orientation)===90)return"landscape"}};
onePageBook={currentPage:0,installed:false,nextPageBuffer:1,prevPageBuffer:1,slideSpeed:800,triggerStopTime:400,bookWidth:0,bookHeight:0,zoomFXSpeed:1E3,bookTop:0,bookLeft:0,draw:function(a){if(device.name()=="iPhone3G"||device.name()=="iPhone4G")(function(){scrollTo(0,1)}).delay(1,this);if(bookData.size.proportions>device.proportions()){this.bookWidth=(device.width()-30).toFixed(0);this.bookHeight=((device.width()-30)/bookData.size.proportions).toFixed(0)}else{this.bookWidth=((device.height()-30)*
bookData.size.proportions).toFixed(0);this.bookHeight=(device.height()-30).toFixed(0)}this.bookTop=((device.height()-this.bookHeight)/2).toFixed(0);this.bookLeft=((device.width()-this.bookWidth)/2).toFixed(0);document.getElementById("bookPortrait")?document.getElementById("bookPortrait"):(new Element("div",{id:"bookPortrait"})).setStyles({position:"absolute",width:this.bookWidth+"px",height:this.bookHeight+"px",top:this.bookTop+"px",left:this.bookLeft+"px","-webkit-box-shadow":"0px 0px 6px #000"}).inject("mainFrame");
this.currentPage=a;this.installed=true;for(var c=a-this.prevPageBuffer;c<=a*1+this.nextPageBuffer;c++)this.drawPage(c)},drawPage:function(a){if(a>0&&a<=bookData.pageCount){if(a<this.currentPage)var c=-device.width(),d="prevPages";else{c="";d="nextPages"}c=(new Element("div",{id:"page"+a,"class":d})).setStyles({width:this.bookWidth+"px",height:this.bookHeight+"px",position:"absolute",overflow:"hidden","-webkit-transform-style":"preserve-3d","z-index":bookData.pageCount-a,"-webkit-transform":"translate3d(0px, 0px, 0px)",
"background-color":bookData.backgroundColor,left:c}).inject("bookPortrait");bookData.page[a].stub||images.injectImageOnPage(a,c)}},erase:function(){this.pageDestroy("all")},destroy:function(a){if(this.installed){this.installed=a||false;document.getElementById("bookPortrait").getElements("canvas").each(function(c){c.destroy()});(function(){document.getElementById("bookPortrait").destroy()}).delay(10,this)}},reDraw:function(){if(this.installed){this.destroy();this.draw(this.currentPage)}},next:function(){if(device.name()==
"iPhone3G"||device.name()=="iPhone4G")window.scrollTo(0,1);if(this.currentPage!=bookData.pageCount){onePageBook.zoom.deleteZoomPage();this.slideFxCurrentPage(this.currentPage);document.getElementById("page"+(this.currentPage-this.prevPageBuffer))&&this.pageDestroy(this.currentPage-this.prevPageBuffer);this.currentPage++;this.drawPage(this.currentPage+this.nextPageBuffer);pageMediator.change();eventTrigger.setBlockTime(this.triggerStopTime)}},prev:function(){if(this.currentPage!=1){onePageBook.zoom.deleteZoomPage();
if(document.getElementById("page"+(this.currentPage-1)).getStyle("-webkit-transform")=="none"||document.getElementById("page"+(this.currentPage-1)).getStyle("-webkit-transform")=="translate3d(0px, 0px, 0px)"){var a=onePageBook.zoom.state=="zoomOut"?device.width():device.width()*onePageBook.zoom.zoomFactor;document.getElementById("page"+(this.currentPage-1)).setStyles({"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-webkit-transition-duration":this.slideSpeed+"ms"})}else document.getElementById("page"+
(this.currentPage-1)).setStyles({"-webkit-transform":"translate3d(0px,0px,0px)"});document.getElementById("page"+(this.currentPage+this.nextPageBuffer))&&this.pageDestroy(this.currentPage+this.nextPageBuffer);this.currentPage--;this.drawPage(this.currentPage-this.prevPageBuffer);pageMediator.change();eventTrigger.setBlockTime(this.triggerStopTime)}},slideFxCurrentPage:function(a){if(document.getElementById("page"+a).getStyle("-webkit-transform")=="none"||document.getElementById("page"+a).getStyle("-webkit-transform")==
"translate3d(0px, 0px, 0px)"){var c=onePageBook.zoom.state=="zoomOut"?device.width():device.width()*onePageBook.zoom.zoomFactor;document.getElementById("page"+a).setStyles({"-webkit-transform":"translate3d(-"+c+"px, 0px,0px)","-webkit-transition-duration":this.slideSpeed+"ms"})}else document.getElementById("page"+a).setStyles({"-webkit-transform":"translate3d(0px, 0px, 0px)"})},slideInAnyPage:function(a){a*=1;if(a<=0)a=1;if(a>bookData.pageCount)a=bookData.pageCount;a==this.currentPage&&pageMediator.change();
if(a-1==this.currentPage)this.next();else if(a+1==this.currentPage)this.prev();else if(a>0&&a<=bookData.pageCount&&a!=this.currentPage){$("bookPortrait").getChildren().each(function(){onePageBook.pageDestroy("all",onePageBook.currentPage)});var c=this.currentPage;if(a>c){this.draw(a);this.slideFxCurrentPage(c);pageMediator.change()}else{$("page"+c).setStyle("z-index",bookData.pageCount-a);this.draw(a+1);(function(){this.prev()}).delay(10,this)}(function(){this.pageDestroy(c)}).delay(1E3,this)}},pageDestroy:function(a,
c){c=c||false;if(this.installed)if(a!="all"&&!c){$("page"+a).getElements("canvas").each(function(d){d.destroy()});$("page"+a).destroy()}else if(a=="all"&&!c){document.getElementById("bookPortrait").getElements("canvas").each(function(d){d.destroy()});$("bookPortrait").getChildren().each(function(d){d.destroy()})}else a=="all"&&c&&$("bookPortrait").getChildren().each(function(d){if(d.getProperty("id")!="page"+c){d.getElements("canvas").each(function(e){e.destroy()});d.destroy()}})}};
var twoPageBook={currentPage:{left:0,right:0},installed:false,nextPageBuffer:2,prevPageBuffer:2,flipSpeed:1E3,triggerStopTime:700,bookWidth:0,bookHeight:0,bookTop:0,bookLeft:0,pageAdaptor:function(a){if(a%2!=0){this.currentPage.left=a-1;this.currentPage.right=a}else{this.currentPage.left=a;this.currentPage.right=a*1+1}this.currentPage.left*=1;this.currentPage.right*=1},draw:function(a){this.pageAdaptor(a);if(bookData.size.proportions*2<device.proportions()){this.bookWidth=((device.height()-130)*bookData.size.proportions*
2).toFixed(0);this.bookHeight=(device.height()-130).toFixed(0)}else{this.bookWidth=device.width()-130;this.bookHeight=((device.width()-130)/(bookData.size.proportions*2)).toFixed(0)}this.bookTop=((device.height()-this.bookHeight)/2).toFixed(0);this.bookLeft=((device.width()-this.bookWidth)/2).toFixed(0);a=this.installed?document.getElementById("bookLandscape"):(new Element("div",{id:"bookLandscape"})).setStyles({"-webkit-perspective":"3000",position:"absolute",width:this.bookWidth+"px",height:this.bookHeight+
"px",top:this.bookTop+"px",left:this.bookLeft+"px","-webkit-transform":"translateZ(0)"}).inject("mainFrame");this.installed=true;for(var c=this.currentPage.left*1;c>this.currentPage.left-this.prevPageBuffer*2;c-=2)twoPageBook.drawPageLeft(c,a);for(c=this.currentPage.right*1;c<this.currentPage.right*1+this.nextPageBuffer*2;c+=2)twoPageBook.drawPageRight(c,a);shadowManager.draw()},drawPageLeft:function(a,c){if(a>0&&a<=bookData.pageCount){var d=(new Element("div",{id:a-1+"x"+a,"class":"leftPages"})).setStyles({position:"absolute",
"float":"left",width:this.bookWidth/2+"px",height:this.bookHeight+"px","-webkit-transform-style":"preserve-3d","-webkit-transition":"-webkit-transform 1s","-webkit-transform":"rotateY(0deg)","z-index":a}).inject(c);this.drawFrontFacePage(a,d)}a-1>0&&a-1<=bookData.pageCount&&this.drawBackFacePage(a-1,d)},drawPageRight:function(a,c){if(a>0&&a<=bookData.pageCount){var d=(new Element("div",{id:a+"x"+(a*1+1),"class":"rightPages"})).setStyles({position:"absolute","float":"right",left:this.bookWidth/2+"px",
width:this.bookWidth/2+"px",height:this.bookHeight+"px","-webkit-transform-style":"preserve-3d","-webkit-transition":"-webkit-transform 1s","-webkit-transform":"rotateY(0deg)","z-index":bookData.pageCount-a}).inject(c);this.drawFrontFacePage(a,d)}a+1>0&&a+1<=bookData.pageCount&&this.drawBackFacePage(a+1,d)},drawFrontFacePage:function(a,c){var d=(new Element("div",{id:a,"class":"front face"})).setStyles({position:"absolute",width:this.bookWidth/2+"px",height:this.bookHeight+"px","-webkit-backface-visibility":"hidden",
"-webkit-transform":"translateZ(0)","background-color":"#fff",overflow:"hidden"}).inject(c);bookData.page[a].stub||images.injectImageOnPage(a,d)},drawBackFacePage:function(a,c){var d=(new Element("div",{id:a,"class":"back face"})).setStyles({position:"absolute","-webkit-transform":"rotateY(180deg) translateZ(0)",width:this.bookWidth/2+"px",height:this.bookHeight+"px","-webkit-backface-visibility":"hidden","background-color":"#fff",overflow:"hidden"}).inject(c);bookData.page[a].stub||images.injectImageOnPage(a,
d)},next:function(){if(this.installed&&this.currentPage.left<bookData.pageCount&&this.currentPage.right<bookData.pageCount){this.flipFxCurrentPage(this.currentPage.right);this.currentPage.left+=2;this.currentPage.right+=2;pageMediator.change();eventTrigger.setBlockTime(this.triggerStopTime,this.flipSpeed+100);(function(){if($$(".leftPages").length>this.prevPageBuffer){var a=this.currentPage.left-(this.prevPageBuffer*2+1)+"x"+(this.currentPage.right-(this.prevPageBuffer*2+1));document.getElementById(a).getChildren("canvas").each(function(d){d.destroy()});
(function(){document.getElementById(a).destroy()}).delay(10,this)}var c=this.currentPage.right*1+(this.nextPageBuffer-1)*2;$$(".rightPages").length<this.nextPageBuffer&&c<=bookData.pageCount&&this.drawPageRight(c,document.getElementById("bookLandscape"))}).delay(this.flipSpeed-240,this)}},prev:function(){if(this.installed&&this.currentPage.left>0&&this.currentPage.right>0){this.flipFxCurrentPage(this.currentPage.left);this.currentPage.left-=2;this.currentPage.right-=2;pageMediator.change();eventTrigger.setBlockTime(this.triggerStopTime,
this.flipSpeed+100);(function(){if($$(".rightPages").length>this.nextPageBuffer){var a=this.currentPage.left+(this.prevPageBuffer*2+1)+"x"+(this.currentPage.right+(this.prevPageBuffer*2+1));document.getElementById(a).getChildren("canvas").each(function(d){d.destroy()});(function(){document.getElementById(a).destroy()}).delay(10,this)}var c=this.currentPage.left*1-(this.prevPageBuffer-1)*2;$$(".leftPages").length<this.prevPageBuffer&&c>0&&this.drawPageLeft(c,document.getElementById("bookLandscape"))}).delay(this.flipSpeed-
240,this)}},erase:function(){shadowManager.erase();if(this.installed){document.getElementById("bookLandscape").getElements("canvas").each(function(a){a.destroy()});document.getElementById("bookLandscape").empty()}},destroy:function(a){if(this.installed){this.installed=a||false;document.getElementById("bookLandscape").getElements("canvas").each(function(c){c.destroy()});(function(){document.getElementById("bookLandscape").destroy()}).delay(10,this)}},flipFxCurrentPage:function(a){if(a%2!=0){if(this.installed&&
this.currentPage.left<bookData.pageCount&&this.currentPage.right<bookData.pageCount){var c=document.getElementById(this.currentPage.right+"x"+(this.currentPage.right*1+1));if(c.getStyle("-webkit-transform")=="rotateY(0deg)"){a=a==bookData.pageCount-1?"rotateY(-179.89deg)":"rotateY(-179.9deg)";var d="0% 0%"}else{a="rotateY(0deg)";d="100% 100%"}c.setStyles({"-webkit-transform":a,"-webkit-transform-origin":d,"-webkit-transition-timing-function":"cubic-bezier(0, 0, 1, 0.95)","-webkit-transition-duration":this.flipSpeed+
"ms"}).setProperties({"class":"leftPages"});var e=this.currentPage.right*1+1;(function(){c.setStyle("z-index",e)}).delay(this.flipSpeed/2)}}else if(this.installed&&this.currentPage.left>0&&this.currentPage.right>0){c=document.getElementById(this.currentPage.left-1+"x"+this.currentPage.left);if(c.getStyle("-webkit-transform")=="rotateY(0deg)"){a=a==2||a==bookData.countPages?"rotateY(179.89deg)":"rotateY(179.9deg)";d="100% 100%"}else{a="rotateY(0deg)";d="0% 0%"}c.setStyles({"-webkit-transform":a,"-webkit-transform-origin":d,
"-webkit-transition-timing-function":"cubic-bezier(0, 0, 1, 0.95)","-webkit-transition-duration":this.flipSpeed+"ms"}).setProperties({"class":"rightPages"});e=bookData.pageCount-this.currentPage.left;(function(){c.setStyle("z-index",e)}).delay(this.flipSpeed/2)}},flipInAnyPage:function(a){a*=1;if(a<=0)a=1;if(a>bookData.pageCount)a=bookData.pageCount;if(a==this.currentPage.left||a==this.currentPage.right)pageMediator.change();if(a-1==this.currentPage.right||a-2==this.currentPage.right)this.next();
else if(a+1==this.currentPage.left||a+2==this.currentPage.left)this.prev();else if(a>0&&a!=this.currentPage.left&&a!=this.currentPage.right&&a<=bookData.pageCount){if(a>this.currentPage.right){this.flipFxCurrentPage(this.currentPage.right);$("canvas"+(this.currentPage.right+1)).destroy();$("canvas"+(this.currentPage.right+2)).destroy();var c=document.getElementById(""+(this.currentPage.right+1)),d=document.getElementById(""+(this.currentPage.right+2));a==bookData.pageCount&&a%2==0&&$$(".rightPages").destroy()}else if(a<
this.currentPage.left){this.flipFxCurrentPage(this.currentPage.left);$("canvas"+(this.currentPage.left-1)).destroy();$("canvas"+(this.currentPage.left-2)).destroy();c=$(""+(this.currentPage.left-1));d=$(""+(this.currentPage.left-2));a==1&&$$(".leftPages").destroy()}var e=c.getStyle("width").toInt()/2-20,g=c.getStyle("height").toInt()/2-20;(new Element("img",{src:"styles/progress.gif",id:""})).setStyles({position:"absolute",width:"40px",height:"40px",left:e,top:g}).inject(c);(new Element("img",{src:"styles/progress.gif",
id:""})).setStyles({position:"absolute",width:"40px",height:"40px",left:e,top:g}).inject(d);this.pageAdaptor(a);pageMediator.change();shadowManager.erase();(function(){twoPageBook.erase();twoPageBook.draw(a)}).delay(1E3,this)}},reDraw:function(){if(this.installed){this.destroy();this.draw(this.currentPage.left)}}},images={getImagePath:function(a){var c="000"+a;if(a>9)c="00"+a;if(a>99)c="0"+a;if(a>999)c=""+a;if(dir==null)PATH_TO_PROPERTIES=photographer_img;if((onePageBook.zoom.state=="zoomIn"&&!zoomBook.zoomOutProcess||
twoPageBook.zoom.state=="zoomIn"&&!zoomBook.zoomOutProcess)&&device.name()=="iPhone3G")return PATH_TO_PROPERTIES+"page"+c+"_i2.jpg?id="+Math.random().toFixed(5)*1E5;else if(onePageBook.zoom.state=="zoomIn"&&!zoomBook.zoomOutProcess||twoPageBook.zoom.state=="zoomIn"&&!zoomBook.zoomOutProcess)return PATH_TO_PROPERTIES+"page"+c+"_i2.jpg?id="+Math.random().toFixed(5)*1E5;if(device.name()=="iPhone3G")return PATH_TO_PROPERTIES+"page"+c+"_i1.jpg?id="+Math.random().toFixed(5)*1E5;if(device.name()=="iPhone4G")return PATH_TO_PROPERTIES+
"page"+c+"_i1.jpg?id="+Math.random().toFixed(5)*1E5;if(device.name()=="iPad")return PATH_TO_PROPERTIES+"page"+c+"_i1.jpg?id="+Math.random().toFixed(5)*1E5;if(device.name()=="other")return PATH_TO_PROPERTIES+"page"+c+"_i2.jpg?id="+Math.random().toFixed(5)*1E5},injectProgressbar:function(a){if(onePageBook.zoom.state=="zoomIn"&&!zoomBook.zoomOutProcess||twoPageBook.zoom.state=="zoomIn"&&!zoomBook.zoomOutProcess)var c=zoomBook.verticalScroll?device.height()/2-20+zoomBook.translateScrollY*1:device.height()/
2-20-zoomBook.topShift,d=zoomBook.horizontalScroll?device.width()/2-20+zoomBook.translateScrollX*1:device.width()/2-20-zoomBook.leftShift;else{c=a.getStyle("height").toInt()/2-20;d=a.getStyle("width").toInt()/2-20}return(new Element("img",{src:dir==null?photographer_src+"progress.png":"styles/progress.png",id:"","class":"progress"})).setStyles({position:"absolute",width:"40px",height:"40px","-webkit-animation-name":"fb-loader","-webkit-animation-duration":"1s","-webkit-animation-iteration-count":"infinite",
"-webkit-animation-timing-function":"linear",left:d+"px",top:c+"px"}).inject(a)},injectImageOnPage:function(a,c,d){if(a>0&&a<=bookData.pageCount){d=d||"canvas";var e=this.injectProgressbar(c),g=c.getWidth(),h=c.getHeight();if(bookData.page[a].proportions>=bookData.size.proportions){var b=g,f=(b/bookData.page[a].proportions).toFixed(0),j=(h-f)/2;((h-f)/2).toFixed(0)}else{f=h;b=(f*bookData.page[a].proportions).toFixed(0);j=(g-b)/2;((g-b)/2).toFixed(0)}if(d=="jpeg"){p=new Image;c.getChildren("canvas").length>
0&&c.getChildren("canvas")[0].destroy();var n=(new Element("canvas",{"class":"zoomImage",width:g+"px",height:h+"px",styles:{visibility:"hidden","-webkit-transform-style":"preserve-3d"}})).inject(c),o=n.getContext("2d");p.onload=function(){e.destroy();n.setStyles({visibility:"visible"});(function(){if(document.getElementById("exZoomIn"+a)){document.getElementById("exZoomIn"+a).getElements("canvas").destroy();document.getElementById("exZoomIn"+a).destroy()}}).delay(1E3,this);bookData.page[a].proportions>=
bookData.size.proportions?o.drawImage(p,0,j,b,f):o.drawImage(p,j,0,b,f)};(function(){p.src=images.getImagePath(a)}).delay(50,this)}else if(d=="canvas"){var p=new Image;o=(new Element("canvas",{width:g+"px",height:h+"px","class":"canvasBook",id:"canvas"+a,styles:{position:"absolute",top:"0px",left:"0px","z-index":"1","-webkit-transform-style":"preserve-3d"}})).inject(c).getContext("2d");if(twoPageBook.installed&&a!=1&&a!=bookData.pageCount)this.drawShadow(c,a,b,f,g,h);else a==bookData.pageCount&&a%
2!=0&&this.drawShadow(c,a,b,f,g,h);p.onload=function(){bookData.page[a].proportions>=bookData.size.proportions?o.drawImage(p,0,j,b,f):o.drawImage(p,j,0,b,f);e.destroy();if(zoomBook.currentPage==a)if(onePageBook.installed){onePageBook.zoom.deleteTrigger=true;onePageBook.zoom.deleteZoomPage()}else if(twoPageBook.installed){twoPageBook.zoom.deleteTrigger=true;twoPageBook.zoom.deleteZoomPage()}};(function(){p.src=images.getImagePath(a)}).delay(50,this)}}},drawShadow:function(a,c,d,e,g,h){a=(new Element("canvas",
{width:g+"px",height:h+"px",id:"canvasShadow"+c,styles:{position:"absolute",top:"0px",left:"0px","z-index":"10000"}})).inject(a).getContext("2d");d=c%2==0?a.createLinearGradient(g-g/8,0,g,0,0.5):a.createLinearGradient(g/8,0,0,0,0.5);d.addColorStop(0,"rgba(255,255,255,0)");d.addColorStop(1,"rgba(0,0,0,0.3)");a.fillStyle=d;if(c%2==0){a.fillRect(g-g/8,0,g/8,h);a.beginPath();a.moveTo(g,0);a.lineTo(g,h);a.strokeStyle="rgba(0,0,0,0.1)";a.stroke()}else a.fillRect(0,0,g/8,h)}},pageMediator={next:function(){if(onePageBook.installed&&
onePageBook.zoom.state=="zoomOut")onePageBook.next();else if(onePageBook.installed&&onePageBook.zoom.state=="zoomIn")zoomBook.next();else if(twoPageBook.installed&&twoPageBook.zoom.state=="zoomOut")twoPageBook.next();else twoPageBook.installed&&twoPageBook.zoom.state=="zoomIn"&&zoomBook.next()},prev:function(){if(onePageBook.installed&&onePageBook.zoom.state=="zoomOut")onePageBook.prev();else if(onePageBook.installed&&onePageBook.zoom.state=="zoomIn")zoomBook.prev();else if(twoPageBook.installed&&
twoPageBook.zoom.state=="zoomOut")twoPageBook.prev();else twoPageBook.installed&&twoPageBook.zoom.state=="zoomIn"&&zoomBook.prev()},change:function(){pager.change();twoPageBook.installed&&twoPageBook.zoom.state=="zoomOut"&&shadowManager.reDraw()}},shadowManager={shadowDiv:"",shadowSize:3,drawOnePage:function(){if(twoPageBook.installed){if(document.getElementById("3x4"))this.shadowDiv=document.getElementById("3x4");var a=bookData.pageCount-2;if(document.getElementById(a-1+"x"+a))this.shadowDiv=document.getElementById(a-
1+"x"+a);this.shadowDiv.setStyles({"-webkit-box-shadow":"0px 0px "+this.shadowSize+"px #000"})}},drawTwoPage:function(){if(twoPageBook.installed){this.shadowDiv=document.getElementById("bookLandscape");this.shadowDiv.setStyles({"-webkit-box-shadow":"0px 0px "+this.shadowSize+"px #000"})}},draw:function(){if(twoPageBook.installed&&twoPageBook.currentPage.right==1||twoPageBook.currentPage.left==bookData.pageCount)this.drawOnePage();else twoPageBook.installed&&this.drawTwoPage()},erase:function(){this.shadowDiv.setStyles({"-webkit-box-shadow":"0px 0px 0px #000"})},
reDraw:function(){if(twoPageBook.installed&&twoPageBook.currentPage.right==1)this.reDrawTwoPagesBook();else if(twoPageBook.installed&&twoPageBook.currentPage.left==bookData.pageCount)this.reDrawTwoPagesBook();else if(twoPageBook.installed&&twoPageBook.currentPage.left==2)this.reDrawTwoPagesBook.delay(twoPageBook.flipSpeed,this);else twoPageBook.installed&&twoPageBook.currentPage.right==bookData.pageCount-1&&this.reDrawTwoPagesBook.delay(twoPageBook.flipSpeed,this)},reDrawTwoPagesBook:function(){this.erase();
this.draw()}},eventManager={touchInterface:false,leftAndRightArea:0.15,gesture:false,start:function(){(this.touchInterface="createTouch"in document?true:false)?this.loadTouchEvents():this.loadClickEvents()},pagerInputEvent:function(){pager.installed&&pager.state=="input"&&document.getElementById("inputPage").addEvent("keydown",function(a){if(a.key=="enter"){twoPageBook.installed&&twoPageBook.zoom.state=="zoomOut"&&twoPageBook.flipInAnyPage(a.target.value);onePageBook.installed&&onePageBook.zoom.state==
"zoomOut"&&onePageBook.slideInAnyPage(a.target.value);twoPageBook.installed&&twoPageBook.zoom.state=="zoomIn"&&zoomBook.goToAnyPage(a.target.value);onePageBook.installed&&onePageBook.zoom.state=="zoomIn"&&zoomBook.goToAnyPage(a.target.value)}})},touchStartCoordinate:{x:0,y:0},loadTouchEvents:function(){document.getElementById("mainFrame").addEvents({gesturestart:function(a){a.preventDefault();eventManager.gesture=true},gesturechange:function(a){a.preventDefault()},gestureend:function(a){a.preventDefault();
(function(){eventManager.gesture=false}).delay(50,this)},touchstart:function(a){a.preventDefault();(function(){scrollTo(0,1)}).delay(1,this);if(eventTrigger.check("fx")&&!eventManager.gesture){eventManager.touchStartCoordinate.x=a.targetTouches[0].pageX;eventManager.touchStartCoordinate.y=a.targetTouches[0].pageY;onePageBook.installed&&onePageBook.events.touchStart(a)}},touchend:function(a){a.preventDefault();if(eventTrigger.check("fx")&&!eventManager.gesture)if(onePageBook.installed)onePageBook.events.touchEnd(a);
else twoPageBook.installed&&twoPageBook.events.touchEnd(a)},touchmove:function(a){a.preventDefault();if(eventTrigger.check("fx")&&!a.targetTouches[1]&&!eventManager.gesture)if(onePageBook.installed)onePageBook.events.touchMove(a);else twoPageBook.installed&&twoPageBook.events.touchMove(a)}})},clickCount:0,doubleClickTime:250,loadClickEvents:function(){document.getElementById("mainFrame").addEvents({click:function(a){a.preventDefault();if(eventTrigger.check())if(onePageBook.installed)onePageBook.events.click(a);
else twoPageBook.installed&&twoPageBook.events.click(a)}})},pagerEvent:function(){pager.installed&&document.getElementById("pagerCurrentPage").addEvent("click",function(a){pager.enableInput(a)})}};if(typeof XML=="undefined")XML=function(){};XML.ObjTree=function(){return this};XML.ObjTree.VERSION="0.24";XML.ObjTree.prototype.xmlDecl='<?xml version="1.0" encoding="UTF-8" ?>\n';XML.ObjTree.prototype.attr_prefix="-";XML.ObjTree.prototype.overrideMimeType="text/xml";
XML.ObjTree.prototype.parseXML=function(a){var c;if(window.DOMParser){c=new DOMParser;a=c.parseFromString(a,"application/xml");if(!a)return;c=a.documentElement}else if(window.ActiveXObject){c=new ActiveXObject("Microsoft.XMLDOM");c.async=false;c.loadXML(a);c=c.documentElement}if(c)return this.parseDOM(c)};
XML.ObjTree.prototype.parseHTTP=function(a,c,d){var e={},g;for(g in c)e[g]=c[g];if(!e.method)e.method=typeof e.postBody=="undefined"&&typeof e.postbody=="undefined"&&typeof e.parameters=="undefined"?"get":"post";if(d){e.asynchronous=true;var h=this,b=e.onComplete;e.onComplete=function(j){var n;if(j&&j.responseXML&&j.responseXML.documentElement)n=h.parseDOM(j.responseXML.documentElement);else if(j&&j.responseText)n=h.parseXML(j.responseText);d(n,j);b&&b(j)}}else e.asynchronous=false;var f;if(typeof HTTP!=
"undefined"&&HTTP.Request){e.uri=a;if(a=new HTTP.Request(e))f=a.transport}else if(typeof Ajax!="undefined"&&Ajax.Request)if(a=new Ajax.Request(a,e))f=a.transport;if(d)return f;if(f&&f.responseXML&&f.responseXML.documentElement)return this.parseDOM(f.responseXML.documentElement);else if(f&&f.responseText)return this.parseXML(f.responseText)};
XML.ObjTree.prototype.parseDOM=function(a){if(a){this.__force_array={};if(this.force_array)for(var c=0;c<this.force_array.length;c++)this.__force_array[this.force_array[c]]=1;c=this.parseElement(a);if(this.__force_array[a.nodeName])c=[c];if(a.nodeType!=11){var d={};d[a.nodeName]=c;c=d}return c}};
XML.ObjTree.prototype.parseElement=function(a){if(a.nodeType!=7){if(a.nodeType==3||a.nodeType==4){if(a.nodeValue.match(/[^\x00-\x20]/)==null)return;return a.nodeValue}var c,d={};if(a.attributes&&a.attributes.length){c={};for(var e=0;e<a.attributes.length;e++){var g=a.attributes[e].nodeName;if(typeof g=="string"){var h=a.attributes[e].nodeValue;if(h){g=this.attr_prefix+g;if(typeof d[g]=="undefined")d[g]=0;d[g]++;this.addNode(c,g,d[g],h)}}}}if(a.childNodes&&a.childNodes.length){g=true;if(c)g=false;
for(e=0;e<a.childNodes.length&&g;e++){h=a.childNodes[e].nodeType;h==3||h==4||(g=false)}if(g){c||(c="");for(e=0;e<a.childNodes.length;e++)c+=a.childNodes[e].nodeValue}else{c||(c={});for(e=0;e<a.childNodes.length;e++){g=a.childNodes[e].nodeName;if(typeof g=="string")if(h=this.parseElement(a.childNodes[e])){if(typeof d[g]=="undefined")d[g]=0;d[g]++;this.addNode(c,g,d[g],h)}}}}return c}};
XML.ObjTree.prototype.addNode=function(a,c,d,e){if(this.__force_array[c]){if(d==1)a[c]=[];a[c][a[c].length]=e}else if(d==1)a[c]=e;else if(d==2)a[c]=[a[c],e];else a[c][a[c].length]=e};XML.ObjTree.prototype.writeXML=function(a){return this.xmlDecl+this.hash_to_xml(null,a)};
XML.ObjTree.prototype.hash_to_xml=function(a,c){var d=[],e=[],g;for(g in c)if(c.hasOwnProperty(g)){var h=c[g];if(g.charAt(0)!=this.attr_prefix)d[d.length]=typeof h=="undefined"||h==null?"<"+g+" />":typeof h=="object"&&h.constructor==Array?this.array_to_xml(g,h):typeof h=="object"?this.hash_to_xml(g,h):this.scalar_to_xml(g,h);else e[e.length]=" "+g.substring(1)+'="'+this.xml_escape(h)+'"'}e=e.join("");g=d.join("");typeof a=="undefined"||a==null||(g=d.length>0?g.match(/\n/)?"<"+a+e+">\n"+g+"</"+a+">\n":
"<"+a+e+">"+g+"</"+a+">\n":"<"+a+e+" />\n");return g};XML.ObjTree.prototype.array_to_xml=function(a,c){for(var d=[],e=0;e<c.length;e++){var g=c[e];d[d.length]=typeof g=="undefined"||g==null?"<"+a+" />":typeof g=="object"&&g.constructor==Array?this.array_to_xml(a,g):typeof g=="object"?this.hash_to_xml(a,g):this.scalar_to_xml(a,g)}return d.join("")};XML.ObjTree.prototype.scalar_to_xml=function(a,c){return a=="#text"?this.xml_escape(c):"<"+a+">"+this.xml_escape(c)+"</"+a+">\n"};
XML.ObjTree.prototype.xml_escape=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};
var bookData={loaded:false,load:function(a){var c=new XML.ObjTree;c.attr_prefix="@";a=c.parseDOM(a);a=a["#document"];this.pageCount=a.Properties.bookProperties.pages.elements.page.length;this.page={};a.Properties.bookProperties.pages.elements.page.each(function(d,e){bookData.page[e+1]={};bookData.page[e+1].width=d.width?d.width["@value"]:a.Properties.bookProperties.pages.defaultValue.width["@value"];bookData.page[e+1].height=d.height?d.height["@value"]:a.Properties.bookProperties.pages.defaultValue.height["@value"];
bookData.page[e+1].stub=d.isStub?true:false;bookData.page[e+1].proportions=(bookData.page[e+1].width/bookData.page[e+1].height-0.0010).toFixed(2)});this.size={};this.size.width=a.Properties.bookProperties.bookWidth["@value"]?a.Properties.bookProperties.bookWidth["@value"]:600;this.size.height=a.Properties.bookProperties.bookHeight["@value"]?a.Properties.bookProperties.bookHeight["@value"]:800;this.size.proportions=(bookData.size.width/bookData.size.height-0.0010).toFixed(2);this.backgroundColor="#FFF";
this.loaded=true}};eventTrigger={state:true,blockTime:0,endFX:0,startTime:Date.now(),setBlockTime:function(a,c){this.endFX=c||a;this.blockTime=a;this.startTime=Date.now()},check:function(a){a=a||"standart";if(a=="standart")return Date.now()-this.startTime>this.blockTime?true:false;else if(a=="high")return true;else if(a=="fx")return Date.now()-this.startTime>this.endFX?true:false}};
onePageBook.events={tapCount:0,clickCount:0,doubleTapTime:250,doubleClickTime:250,leftAndRightArea:0.15,touchEnd:function(a){if(onePageBook.zoom.state=="zoomOut")if(eventManager.touchStartCoordinate.x-a.changedTouches[0].pageX<-50)this.flipRight();else if(eventManager.touchStartCoordinate.x-a.changedTouches[0].pageX>50)this.flipLeft();else{onePageBook.events.tapCount++;if(onePageBook.events.tapCount==1)(function(d){if(onePageBook.events.tapCount==1){this.singleTap(d);onePageBook.events.tapCount=0}}).delay(onePageBook.events.doubleTapTime,
this,a);else{this.doubleTap(a);onePageBook.events.tapCount=0}}else if(onePageBook.zoom.state=="zoomIn"&&document.getElementById("zoomBook"))if(Math.abs(eventManager.touchStartCoordinate.x-a.changedTouches[0].pageX)>2||Math.abs(eventManager.touchStartCoordinate.y-a.changedTouches[0].pageY)>2){var c=a.changedTouches[0].pageX-eventManager.touchStartCoordinate.x;a=a.changedTouches[0].pageY-eventManager.touchStartCoordinate.y;zoomBook.scrollEnd(c,a);a=c=null}else{onePageBook.events.tapCount++;if(onePageBook.events.tapCount==
1)(function(d){if(onePageBook.events.tapCount==1){this.singleTap(d);onePageBook.events.tapCount=0}}).delay(onePageBook.events.doubleTapTime,this,a);else{this.doubleTap(a);onePageBook.events.tapCount=0}}},touchStart:function(){},touchMove:function(a){onePageBook.zoom.state=="zoomIn"&&zoomBook.scroll(a.targetTouches[0].pageX-eventManager.touchStartCoordinate.x,a.targetTouches[0].pageY-eventManager.touchStartCoordinate.y)},click:function(a){onePageBook.events.clickCount++;if(onePageBook.events.clickCount==
1)(function(c){if(onePageBook.events.clickCount==1){this.singleClick(c);onePageBook.events.clickCount=0}}).delay(onePageBook.events.doubleClickTime,this,a);else{this.doubleClick(a);onePageBook.events.clickCount=0}},singleTap:function(a){if(onePageBook.zoom.state=="zoomOut")if(a.changedTouches[0].pageX<device.width()*onePageBook.events.leftAndRightArea)onePageBook.prev();else a.changedTouches[0].pageX>device.width()-device.width()*onePageBook.events.leftAndRightArea?onePageBook.next():toolbar.toogle();
else if(a.changedTouches[0].pageX<device.width()*onePageBook.events.leftAndRightArea)zoomBook.prev();else a.changedTouches[0].pageX>device.width()-device.width()*onePageBook.events.leftAndRightArea?zoomBook.next():toolbar.toogle()},doubleTap:function(a){if(a.target.get("tag")=="canvas"&&eventTrigger.check("fx"))if(onePageBook.zoom.state==="zoomOut"&&a.target.getParent().getProperty("class")!="zPage"){onePageBook.zoom.zoomIn(a);eventTrigger.setBlockTime(onePageBook.zoom.zoomFXSpeed)}else if(onePageBook.zoom.state===
"zoomIn"&&a.target.getParent().getProperty("class")=="zPage"){onePageBook.zoom.zoomOut(a);eventTrigger.setBlockTime(onePageBook.zoom.zoomFXSpeed)}},singleClick:function(a){if(onePageBook.zoom.state=="zoomOut")if(a.event.x<device.width()*onePageBook.events.leftAndRightArea)onePageBook.prev();else a.event.x>device.width()-device.width()*onePageBook.events.leftAndRightArea?onePageBook.next():toolbar.toogle();else if(a.event.x<device.width()*onePageBook.events.leftAndRightArea)zoomBook.prev();else a.event.x>
device.width()-device.width()*onePageBook.events.leftAndRightArea?zoomBook.next():toolbar.toogle()},doubleClick:function(a){if(a.target.get("tag")=="canvas"&&eventTrigger.check("fx"))if(onePageBook.zoom.state==="zoomOut"&&a.target.getParent().getProperty("class")!="zPage"){onePageBook.zoom.zoomIn(a);eventTrigger.setBlockTime(onePageBook.zoomFXSpeed)}else if(onePageBook.zoom.state==="zoomIn"&&a.target.getParent().getProperty("class")=="zPage"){onePageBook.zoom.zoomOut(a);eventTrigger.setBlockTime(onePageBook.zoomFXSpeed)}},
flipLeft:function(){onePageBook.zoom.state==="zoomOut"&&onePageBook.next()},flipRight:function(){onePageBook.zoom.state==="zoomOut"&&onePageBook.prev()}};
twoPageBook.events={tapCount:0,clickCount:0,doubleTapTime:250,doubleClickTime:250,leftAndRightArea:0.15,touchEnd:function(a){if(twoPageBook.zoom.state=="zoomOut")if(eventManager.touchStartCoordinate.x-a.changedTouches[0].pageX<-50)this.flipRight();else if(eventManager.touchStartCoordinate.x-a.changedTouches[0].pageX>50)this.flipLeft();else{twoPageBook.events.tapCount++;if(twoPageBook.events.tapCount==1)(function(d){if(twoPageBook.events.tapCount==1){this.singleTap(d);twoPageBook.events.tapCount=0}}).delay(twoPageBook.events.doubleTapTime,
this,a);else{this.doubleTap();twoPageBook.events.tapCount=0}}else if(twoPageBook.zoom.state=="zoomIn"&&document.getElementById("zoomBook"))if(Math.abs(eventManager.touchStartCoordinate.x-a.changedTouches[0].pageX)>2||Math.abs(eventManager.touchStartCoordinate.y-a.changedTouches[0].pageY)>2){var c=a.changedTouches[0].pageX-eventManager.touchStartCoordinate.x;a=a.changedTouches[0].pageY-eventManager.touchStartCoordinate.y;zoomBook.scrollEnd(c,a);a=c=null}else{twoPageBook.events.tapCount++;if(twoPageBook.events.tapCount==
1)(function(d){if(twoPageBook.events.tapCount==1){this.singleTap(d);twoPageBook.events.tapCount=0}}).delay(twoPageBook.events.doubleTapTime,this,a);else{this.doubleTap();twoPageBook.events.tapCount=0}}},touchMove:function(a){twoPageBook.zoom.state=="zoomIn"&&zoomBook.scroll(a.targetTouches[0].pageX-eventManager.touchStartCoordinate.x,a.targetTouches[0].pageY-eventManager.touchStartCoordinate.y)},click:function(a){twoPageBook.events.clickCount++;if(twoPageBook.events.clickCount==1)(function(c){if(twoPageBook.events.clickCount==
1){this.singleClick(c);twoPageBook.events.clickCount=0}}).delay(twoPageBook.events.doubleClickTime,this,a);else{this.doubleClick(a);twoPageBook.events.clickCount=0}},singleTap:function(a){if(twoPageBook.zoom.state=="zoomOut")if(a.changedTouches[0].pageX<device.width()*twoPageBook.events.leftAndRightArea)twoPageBook.prev();else a.changedTouches[0].pageX>device.width()-device.width()*twoPageBook.events.leftAndRightArea?twoPageBook.next():toolbar.toogle();else if(a.changedTouches[0].pageX<device.width()*
twoPageBook.events.leftAndRightArea)zoomBook.prev();else a.changedTouches[0].pageX>device.width()-device.width()*twoPageBook.events.leftAndRightArea?zoomBook.next():toolbar.toogle()},doubleTap:function(){if(eventTrigger.check("fx")&&event.target.get("tag")=="canvas")if(twoPageBook.zoom.state==="zoomOut"&&event.target.getParent().getProperty("class")!="zPage"){twoPageBook.zoom.zoomIn(event);eventTrigger.setBlockTime(twoPageBook.zoom.zoomFXSpeed)}else if(twoPageBook.zoom.state==="zoomIn"&&event.target.getParent().getProperty("class")==
"zPage"){twoPageBook.zoom.zoomOut(event);eventTrigger.setBlockTime(twoPageBook.zoom.zoomFXSpeed)}},singleClick:function(a){if(twoPageBook.zoom.state=="zoomOut")if(a.event.x<device.width()*twoPageBook.events.leftAndRightArea)twoPageBook.prev();else a.event.x>device.width()-device.width()*twoPageBook.events.leftAndRightArea?twoPageBook.next():toolbar.toogle();else if(a.event.x<device.width()*twoPageBook.events.leftAndRightArea)zoomBook.prev();else a.event.x>device.width()-device.width()*twoPageBook.events.leftAndRightArea?
zoomBook.next():toolbar.toogle()},doubleClick:function(a){if(eventTrigger.check("fx")&&a.target.get("tag")=="canvas"&&eventTrigger.check("fx"))if(twoPageBook.zoom.state==="zoomOut"&&a.target.getParent().getProperty("class")!="zPage"){twoPageBook.zoom.zoomIn(a);eventTrigger.setBlockTime(twoPageBook.zoom.zoomFXSpeed)}else if(twoPageBook.zoom.state==="zoomIn"&&a.target.getParent().getProperty("class")=="zPage"){twoPageBook.zoom.zoomOut(a);eventTrigger.setBlockTime(twoPageBook.zoom.zoomFXSpeed)}},flipLeft:function(){twoPageBook.zoom.state===
"zoomOut"&&twoPageBook.next()},flipRight:function(){twoPageBook.zoom.state==="zoomOut"&&twoPageBook.prev()}};
onePageBook.zoom={state:"zoomOut",zoomFactor:1.3,position:{x:0,y:0},zoomFXSpeed:800,deleteTrigger:false,zoomIn:function(){this.state="zoomIn";this.zoomFactor=(screen.height/onePageBook.bookWidth).toFixed(3);if(device.name()=="iPhone3G")this.zoomFactor*=1.6;var a=onePageBook.bookWidth*this.zoomFactor,c=onePageBook.bookHeight*this.zoomFactor;document.getElementById("page"+onePageBook.currentPage).inject("mainFrame").setStyles({top:onePageBook.bookTop+"px",left:onePageBook.bookLeft+"px","-webkit-transform":"translate3d(0px,0px,0px)"});
(function(){onePageBook.destroy(true)}).delay(10,this);(function(){document.getElementById("page"+onePageBook.currentPage).setStyles({"-webkit-transform-style":"preserve-3d","-webkit-transition-duration":this.zoomFXSpeed+"ms","-webkit-transform":"scale3d("+this.zoomFactor+","+this.zoomFactor+",1)"})}).delay(20,this);(function(){zoomBook.draw(this.zoomFactor,a,c,onePageBook.currentPage,document.getElementById("page"+onePageBook.currentPage),this.zoomFXSpeed)}).delay(this.zoomFXSpeed,this)},zoomOut:function(a){zoomBook.zoomOutProcess=
true;this.deleteTrigger=false;var c=zoomBook.verticalScroll?(zoomBook.pageHeight-device.height())/2:0,d=((zoomBook.horizontalScroll?(zoomBook.pageWidth-device.width())/2:0)-zoomBook.translateScrollX)*this.zoomFactor,e=(c-zoomBook.translateScrollY)*this.zoomFactor,g=a.target.getParent("div");g.getChildren("canvas").setProperty("class","exZoom"+zoomBook.currentPage);$$(".zoomImage").each(function(h){h.destroy()});images.injectProgressbar(g);(function(){(function(){g.setStyles({"-webkit-transform-style":"preserve-3d",
"-webkit-transition-duration":onePageBook.zoom.zoomFXSpeed+"ms","-webkit-transform":"scale3d("+1/onePageBook.zoom.zoomFactor+","+1/onePageBook.zoom.zoomFactor+",1) translate3d("+-d+"px,"+-e+"px,0px)"})}).delay(40,this);(function(){onePageBook.draw(zoomBook.currentPage);onePageBook.zoom.state="zoomOut";pageMediator.change()}).delay(1,this);(function(){zoomBook.zoomOutProcess=false;onePageBook.zoom.deleteTrigger&&onePageBook.zoom.deleteZoomPage()}).delay(this.zoomFXSpeed,this)}).delay(100,this)},deleteZoomPage:function(){if(document.getElementById("zoomBook")&&
!zoomBook.zoomOutProcess){document.getElementById("zoomBook").getChildren("canvas").destroy();document.getElementById("zoomBook").destroy();this.deleteTrigger=false}}};
twoPageBook.zoom={state:"zoomOut",zoomFactor:2,position:{x:0,y:0},zoomFXSpeed:800,deleteTrigger:false,zoomIn:function(a){this.state="zoomIn";this.zoomFactor=(device.width()/(twoPageBook.bookWidth/2)).toFixed(3);var c=a.target.getParent().id,d=twoPageBook.bookWidth/2*this.zoomFactor,e=twoPageBook.bookHeight*this.zoomFactor;if(c%2==0)var g=document.getElementById(c).setStyles({top:twoPageBook.bookTop+"px",left:twoPageBook.bookLeft+"px","-webkit-transform":"translateZ(0px)"}).setProperty("id","page"+
c).inject("mainFrame"),h=document.getElementById("bookLandscape").getStyle("left").toInt()-((device.width()-twoPageBook.bookWidth/2)/2).toFixed(2);else{g=document.getElementById(c).setStyles({top:twoPageBook.bookTop+"px",left:twoPageBook.bookLeft*1+twoPageBook.bookWidth/2+"px","-webkit-transform":"translateZ(0px)"}).setProperty("id","page"+c).inject("mainFrame");h=document.getElementById("bookLandscape").getStyle("left").toInt()+twoPageBook.bookWidth/2-((device.width()-twoPageBook.bookWidth/2)/2).toFixed(2)}g.getChildren("canvas").setProperty("class",
"exIn");(function(){g.setStyles({"-webkit-transform-style":"preserve-3d","-webkit-transition-duration":this.zoomFXSpeed+"ms","-webkit-transform":"scale3d("+this.zoomFactor+","+this.zoomFactor+",1) translate3d("+-h/this.zoomFactor+"px,0px,0px)"})}).delay(150,this);(function(){(function(){twoPageBook.destroy(true);zoomBook.draw(this.zoomFactor,d,e,c,document.getElementById("page"+c),this.zoomFXSpeed)}).delay(10,this)}).delay(this.zoomFXSpeed+150,this)},zoomOut:function(a){zoomBook.zoomOutProcess=true;
twoPageBook.zoom.deleteTrigger=false;var c=-((zoomBook.verticalScroll?(zoomBook.pageHeight-device.height())/2:0)-zoomBook.translateScrollY)*this.zoomFactor;device.height();var d=bookData.size.proportions*2<device.proportions()?((device.height()-130)*bookData.size.proportions*2).toFixed(0):device.width()-130,e=((device.width()-d)/2).toFixed(0),g=zoomBook.currentPage%2==0?-(e*1+d/2-(device.width()-d/2)/2)*this.zoomFactor:(e*1+d/2-(device.width()-d/2)/2)*this.zoomFactor;e=zoomBook.horizontalScroll?-zoomBook.translateScrollX:
zoomBook.leftShift;var h=a.target.getParent("div");h.getChildren("canvas").setProperty("class","exZoom"+zoomBook.currentPage);$$(".zoomImage").each(function(b){b.destroy()});images.injectProgressbar(h);(function(){(function(){twoPageBook.installed=false;twoPageBook.draw(zoomBook.currentPage);twoPageBook.zoom.state="zoomOut";pageMediator.change()}).delay(1,this);(function(){h.setStyles({"-webkit-transform-style":"preserve-3d","-webkit-transition-duration":this.zoomFXSpeed+"ms","-webkit-transform":"scale3d("+
1/this.zoomFactor+","+1/this.zoomFactor+",1) translate3d("+g+"px,"+c+"px,0px)"})}).delay(10,this);(function(){zoomBook.zoomOutProcess=false;twoPageBook.zoom.deleteTrigger&&twoPageBook.zoom.deleteZoomPage()}).delay(this.zoomFXSpeed+10,this)}).delay(100,this)},deleteZoomPage:function(){if(document.getElementById("zoomBook")&&!zoomBook.zoomOutProcess){document.getElementById("zoomBook").getChildren("canvas").destroy();document.getElementById("zoomBook").destroy();this.deleteTrigger=false}}};
var zoomBook={verticalScroll:false,horizontalScroll:false,zoomOutProcess:false,pageAreaWidth:0,pageAreaHeight:0,pageWidth:0,pageHeight:0,topShift:0,leftShift:0,translateScrollX:0,translateX:0,translateScrollY:0,zoomFactor:0,currentPage:0,nextPageBuffer:1,prevPageBuffer:1,slideSpeed:1E3,initSizes:function(a,c,d,e){this.zoomFactor=a;this.currentPage=e;this.pageWidth=c;this.pageHeight=d;this.pageAreaWidth=c>device.width()?c:device.width();this.pageAreaHeight=d>device.height()?d:device.height();this.translateScrollY=
((this.pageAreaHeight-device.height())/2).toFixed(0);this.translateScrollX=((this.pageAreaWidth-device.width())/2).toFixed(0);this.topShift=((device.height()-d)/2).toFixed(0);this.leftShift=((device.width()-c)/2).toFixed(0);if(c.toFixed(0)>=device.width()){this.horizontalScroll=true;this.leftShift=0}else{this.horizontalScroll=false;this.translateScrollX=0}if(d.toFixed(0)>device.height()){this.verticalScroll=true;this.topShift=0}else{this.verticalScroll=false;this.translateScrollY=0}this.translateX=
this.pageAreaWidth*(this.currentPage-1)+this.translateScrollX*1},draw:function(a,c,d,e,g){(function(){scrollTo(0,1)}).delay(1,this);this.initSizes(a,c,d,e);if(!document.getElementById("zoomBook"))var h=(new Element("div",{id:"zoomBook",styles:{width:this.pageAreaWidth+"px",height:this.pageAreaHeight+"px",position:"absolute",overflow:"visible","-webkit-transform-style":"preserve-3d","z-index":"1000","-webkit-transform":"translate3d("+-(this.translateScrollX*1)+"px,"+-this.translateScrollY+"px,0px)"}})).inject("mainFrame");
g.setProperty("id","exZoomIn"+this.currentPage);pageMediator.change();this.drawPages(h)},drawPages:function(a){var c=(new Element("div",{id:"one","class":"zPage",styles:{position:"absolute",width:this.pageWidth,height:this.pageHeight,top:this.topShift+"px","background-color":"white",overflow:"hidden",left:-this.pageAreaWidth*1+this.leftShift*1+"px"}})).inject(a),d=(new Element("div",{id:"two","class":"zPage",styles:{position:"absolute",width:this.pageWidth,height:this.pageHeight,top:this.topShift+
"px",overflow:"hidden",left:this.leftShift*1+"px"}})).inject(a);if(document.getElementById("exZoomIn"+this.currentPage)){if(onePageBook.installed)var e=(this.pageWidth-onePageBook.bookWidth)/2,g=(this.pageHeight-onePageBook.bookHeight)/2;else if(twoPageBook.installed){g=(this.pageHeight-twoPageBook.bookHeight)/2;e=this.currentPage%2==0?(this.pageWidth-twoPageBook.bookWidth)/2:(this.pageWidth-twoPageBook.bookWidth)/2+twoPageBook.bookWidth/2}document.getElementById("exZoomIn"+this.currentPage).setStyles({left:e+
"px",top:g+"px","z-index":"0"}).inject(d)}images.injectImageOnPage(this.currentPage,d,"jpeg");var h=(new Element("div",{id:"three","class":"zPage",styles:{position:"absolute",width:this.pageWidth,height:this.pageHeight,top:this.topShift+"px",overflow:"hidden","background-color":"white",left:this.pageAreaWidth*1+this.leftShift*1+"px"}})).inject(a);(new Element("div",{id:"four","class":"zPage",styles:{position:"absolute",width:this.pageWidth,height:this.pageHeight,top:this.topShift+"px","background-color":"white",
overflow:"hidden",left:this.pageAreaWidth*2+this.leftShift*1+"px"}})).inject(a);(function(){images.injectImageOnPage(this.currentPage*1-1,c,"jpeg");images.injectImageOnPage(this.currentPage*1+1,h,"jpeg")}).delay(30,this)},next:function(){if(this.currentPage!=bookData.pageCount){this.translateScrollX=this.translateScrollY=0;document.getElementById("zoomBook").setStyles({"-webkit-transform":"translate3d("+-this.translateScrollX+"px,"+-this.translateScrollY+"px,0px)","-webkit-transition-duration":this.slideSpeed+
"ms"});$$(".zPage").setStyles({"-webkit-transform":"translate3d("+-this.pageAreaWidth+"px,0px,0px)","-webkit-transition-duration":this.slideSpeed+"ms"});this.currentPage++;pageMediator.change();images.injectImageOnPage(this.currentPage*1+1,document.getElementById("four"),"jpeg");(function(){document.getElementById("one").setProperty("id","x").setStyle("left",zoomBook.pageAreaWidth*2+zoomBook.leftShift*1+"px");document.getElementById("two").setProperty("id","one").setStyles({left:-zoomBook.pageAreaWidth*
1+zoomBook.leftShift*1+"px","background-color":"white"});document.getElementById("three").setProperty("id","two").setStyle("left",zoomBook.leftShift*1+"px");document.getElementById("four").setProperty("id","three").setStyle("left",zoomBook.pageAreaWidth*1+zoomBook.leftShift*1+"px");document.getElementById("x").setProperty("id","four");document.getElementById("four").getChildren("canvas").length>0&&document.getElementById("four").getChildren("canvas")[0].destroy();$$(".zPage").setStyles({"-webkit-transform":"translate3d(0px,0px,0px)",
"-webkit-transition-duration":"0ms"})}).delay(zoomBook.slideSpeed,this);eventTrigger.setBlockTime(zoomBook.slideSpeed+50)}},prev:function(){if(this.currentPage!=1){this.translateScrollX=this.translateScrollY=0;document.getElementById("zoomBook").setStyles({"-webkit-transform":"translate3d("+-this.translateScrollX+"px,"+-this.translateScrollY+"px,0px)","-webkit-transition-duration":this.slideSpeed+"ms"});$$(".zPage").setStyles({"-webkit-transform":"translate3d("+this.pageAreaWidth+"px,0px,0px)","-webkit-transition-duration":this.slideSpeed+
"ms"});this.currentPage--;pageMediator.change();images.injectImageOnPage(this.currentPage-1,document.getElementById("four"),"jpeg");(function(){document.getElementById("four").setProperty("id","x").setStyle("left",-this.pageAreaWidth*1+this.leftShift*1+"px");document.getElementById("three").setProperty("id","four").setStyle("left",this.pageAreaWidth*2+this.leftShift*1+"px");document.getElementById("two").setProperty("id","three").setStyles({left:this.pageAreaWidth*1+this.leftShift*1+"px","background-color":"white"});
document.getElementById("one").setProperty("id","two").setStyle("left",this.leftShift*1+"px");document.getElementById("x").setProperty("id","one");document.getElementById("four").getChildren("canvas").length>0&&document.getElementById("four").getChildren("canvas")[0].destroy();$$(".zPage").setStyles({"-webkit-transform":"translate3d(0px,0px,0px)","-webkit-transition-duration":"0ms"})}).delay(this.slideSpeed,this);eventTrigger.setBlockTime(this.slideSpeed+50)}},scroll:function(a,c){if(this.horizontalScroll)if(this.translateScrollX-
a>this.pageWidth-device.width()){var d=this.pageWidth-device.width()-this.translateScrollX;a=-(d-(a+d)/2)}else{if(this.translateScrollX-a<0)a=this.translateScrollX*1-(this.translateScrollX*1-a)/3}else a=0;if(this.verticalScroll)if(this.translateScrollY-c>this.pageHeight-device.height()){d=this.pageHeight-device.height()-this.translateScrollY;c=-(d-(c+d)/2)}else{if(this.translateScrollY-c<0)c=this.translateScrollY*1-(this.translateScrollY*1-c)/3}else c=0;document.getElementById("zoomBook").setStyles({"-webkit-transform":"translate3d("+
(-this.translateScrollX*1+a*1)+"px,"+(-this.translateScrollY*1+c*1)+"px,0px)","-webkit-transition-duration":"0ms"})},scrollEnd:function(a,c){var d=this.pageWidth-device.width()-this.translateScrollX,e=this.horizontalScroll?device.name()=="iPad"?-300:-125:device.name()=="iPad"?-130:-50;if(this.translateScrollX-a>this.pageWidth-device.width()&&a*1+d*1<e&&this.currentPage!=bookData.pageCount)this.next();else if(this.translateScrollX-a<0&&this.currentPage!=1&&this.translateScrollX*1-a<e)this.prev();else{if(this.verticalScroll)if(this.translateScrollY-
c>this.pageHeight-device.height())this.translateScrollY=this.pageHeight-device.height();else if(this.translateScrollY-c<0)this.translateScrollY=0;else this.translateScrollY-=c;if(this.horizontalScroll)if(this.translateScrollX-a>this.pageWidth-device.width())this.translateScrollX=this.pageWidth-device.width();else if(this.translateScrollX-a<0)this.translateScrollX=0;else this.translateScrollX-=a;document.getElementById("zoomBook").setStyles({"-webkit-transform":"translate3d("+-this.translateScrollX+
"px,"+-this.translateScrollY+"px,0px)","-webkit-transition-duration":"300ms"})}},goToAnyPage:function(a){a*=1;if(a<=0)a=1;if(a>bookData.pageCount)a=bookData.pageCount;a==this.currentPage&&pageMediator.change();if(a>0&&a<=bookData.pageCount&&a!=this.currentPage)if(a*1+1==this.currentPage)this.prev();else if(a-1==this.currentPage)this.next();else if(a>this.currentPage){images.injectImageOnPage(a,document.getElementById("three"),"jpeg");(function(){images.injectImageOnPage(a*1-1,document.getElementById("two"),
"jpeg")}).delay(this.slideSpeed-100,this);this.currentPage=a-1;this.next()}else{images.injectImageOnPage(a,document.getElementById("one"),"jpeg");(function(){images.injectImageOnPage(a*1+1,document.getElementById("two"),"jpeg")}).delay(this.slideSpeed-100,this);this.currentPage=a*1+1;this.prev()}},reDraw:function(a){if(a=="portrait"){onePageBook.installed=true;onePageBook.zoom.state="zoomIn";twoPageBook.installed=false;twoPageBook.zoom.state="zoomOut";a=bookData.size.proportions>device.proportions()?
(device.width()-30).toFixed(0):((device.height()-30)*bookData.size.proportions).toFixed(0);this.zoomFactor=onePageBook.zoom.zoomFactor=(screen.height/a).toFixed(3)}else if(a=="landscape"){onePageBook.installed=false;onePageBook.zoom.state="zoomOut";twoPageBook.installed=true;twoPageBook.zoom.state="zoomIn";a=bookData.size.proportions*2<device.proportions()?((device.height()-130)*bookData.size.proportions*2).toFixed(0):device.width()-130;this.zoomFactor=twoPageBook.zoom.zoomFactor=(device.width()/
(a/2)).toFixed(3)}if(device.name()=="iPhone3G")this.zoomFactor*=1.6;this.translateScrollX=this.translateScrollX>this.pageAreaWidth-device.width()?this.pageAreaWidth-device.width():this.translateScrollX;this.translateScrollY=this.translateScrollY>this.pageAreaHeight-device.height()?this.pageAreaHeight-device.height():this.translateScrollY;if(this.pageWidth.toFixed(0)>device.width()){this.horizontalScroll=true;this.leftShift=0}else{this.horizontalScroll=false;this.leftShift=((device.width()-this.pageWidth)/
2).toFixed(0);this.pageAreaWidth=this.pageWidth>device.width()?this.pageWidth:device.width();this.translateScrollX=0}if(this.pageHeight.toFixed(0)>device.height()){this.verticalScroll=true;this.topShift=0}else{this.verticalScroll=false;this.topShift=((device.height()-this.pageHeight)/2).toFixed(0);this.pageAreaHeight=this.pageHeight>device.height()?this.pageHeight:device.height();this.translateScrollY=0}document.getElementById("zoomBook").setStyles({width:this.pageAreaWidth+"px",height:this.pageAreaHeight+
"px"}).getChildren("div").each(function(c){c.setStyles({top:zoomBook.topShift+"px",left:this.leftShift*1+"px"})});document.getElementById("zoomBook").setStyles({"-webkit-transform":"translate3d("+-this.translateScrollX+"px,"+-this.translateScrollY+"px,0px)","-webkit-transition-duration":"100ms"})}},pager={installed:false,state:"show",draw:function(){if(toolbar.installed){var a=toolbar.toolbarHeight/100*40,c=(toolbar.toolbarHeight-(a+4))/2;if(!this.installed){var d=(new Element("span",{})).inject("topToolbar").setStyles({"float":"left",
margin:c+"px 0 0 "+c+"px",color:"white","font-size":a,padding:"0px","font-family":"Helvetica Neue, HelveticaNeue, Helvetica-Neue, Helvetica, BBAlpha Sans, sans-serif","text-shadow":"rgba(0, 0, 0, 0.496094) 0px -0.08em 0px"}).set("text","Page  ");(new Element("span",{id:"pagerCurrentPage"})).inject(d).setStyles({margin:c+"px 0 0 0",color:"white","font-size":a,"font-family":"Helvetica Neue, HelveticaNeue, Helvetica-Neue, Helvetica, BBAlpha Sans, sans-serif","text-shadow":"rgba(0, 0, 0, 0.496094) 0px -0.08em 0px"}).set("text",
"0");d.appendText(" of "+bookData.pageCount)}this.installed=true;eventManager.pagerEvent()}},change:function(){this.state=="input"&&this.cancelInput();if(onePageBook.installed&&onePageBook.zoom.state=="zoomOut")document.getElementById("pagerCurrentPage").set("text",onePageBook.currentPage);else if(onePageBook.installed&&onePageBook.zoom.state=="zoomIn")document.getElementById("pagerCurrentPage").set("text",zoomBook.currentPage);else if(twoPageBook.installed&&twoPageBook.zoom.state=="zoomOut")if(twoPageBook.currentPage.left>
0&&twoPageBook.currentPage.right<=bookData.pageCount)document.getElementById("pagerCurrentPage").set("text",twoPageBook.currentPage.left+"-"+twoPageBook.currentPage.right);else if(twoPageBook.currentPage.left<=0)document.getElementById("pagerCurrentPage").set("text",twoPageBook.currentPage.right);else twoPageBook.currentPage.right>bookData.pageCount&&document.getElementById("pagerCurrentPage").set("text",twoPageBook.currentPage.left);else twoPageBook.installed&&twoPageBook.zoom.state=="zoomIn"&&document.getElementById("pagerCurrentPage").set("text",
zoomBook.currentPage)},enableInput:function(){(new Element("input",{id:"inputPage",type:"number",styles:{height:toolbar.toolbarHeight/100*40+"px",width:toolbar.toolbarHeight/100*120+"px","vertical-align":"text-top",padding:"0px",border:"1px solid white","text-align":"center"}})).replaces(pagerCurrentPage).focus();this.state="input";eventManager.pagerInputEvent()},cancelInput:function(){var a=toolbar.toolbarHeight/100*40,c=(toolbar.toolbarHeight-(a+4))/2;(new Element("span",{id:"pagerCurrentPage"})).replaces("inputPage").setStyles({margin:c+
"px 0 0 0",color:"white","font-size":a}).set("text","0").addEvent("click",function(d){pager.enableInput(d)});this.state="show"}};start();
